/** m.tv.sohu.com, time 20151229 15:02:51, sohu inc */
svp.define("base.action",function(require,exports,module){"use strict";var $=svp.$,vars=require("base.vars"),URL=require("base.url"),cookie=require("base.cookie"),Storage=require("base.store"),clickTrace=require("trace.click"),download=require("data.appDownload"),Console=require("base.console"),Action={URLProtocol:"sohuvideo"+(vars.IsIpad?"hd":"")+"://",openTime:vars.IsIOS?800:1e3,appChanneled:1000120001,maxEffectiveTime:72e5,appPortArr:["23456","23457"],appInfoReqCounts:0,URLGlobalParams:{},openIos:function(a,b){if(a){var c=document.createElement("iframe");c.style.display="none";var d,e=document.body,f=function(a,d){b&&"function"==typeof b&&b(d),window.removeEventListener("pagehide",g,!0),window.removeEventListener("pageshow",g,!0),c&&(c.onload=null,e.removeChild(c),c=null)},g=function(a){clearTimeout(d),f(a,!1)};window.addEventListener("pagehide",g,!0),window.addEventListener("pageshow",g,!0),c.onload=f,c.src=a,e.appendChild(c);var h=+new Date;d=setTimeout(function(){d=setTimeout(function(){var a=+new Date;h-a>1300?f(null,!1):f(null,!0)},1200)},60)}},openAndroid:function(a,b,c){if(a){var d=URL.getQueryData(location.search.substring(1)),e=!1,f=!1;if("undefined"!=typeof c&&("click"===c&&(e=!0),"try"===c&&(f=!0)),d.startClient&&"1"===d.startClient&&d.clientType||!f&&(d.startClient&&"2"!==d.startClient||e)&&Action.isIntentList()&&!/UCBrowser/i.test(vars.UA)&&-1===a.indexOf("svawebsocket"))window.location.href=a;else{var g=document.createElement("iframe");g.style.display="none",g.src=a;var h=document.body;h.appendChild(g),setTimeout(function(){h.removeChild(g),g.onload=null,g=null},200)}b&&"function"==typeof b&&b()}},isIntentList:function(){var a=!1;return vars.IsAndroid&&/(SAMSUNG[\s\\-_]+)?SM[\s\\-_]+(N90|G90|T|P6)+|Nexus/i.test(vars.UA)&&(a=!0),a},isForceIntent:function(){var a=!1;return vars.IsAndroid&&this.isIntentList()&&!/UCBrowser/i.test(vars.UA)&&!/QQBrowser/i.test(vars.UA)&&(a=!0),a},getAppChanneled:function(){var a=window.VideoData||window.videoData||{},b=URL.getQueryString("channeled")||a.channeled||Action.appChanneled,c=window.location.href||"http://m.tv.sohu.com/";try{(c.indexOf("hots")>-1||c.indexOf("/x")>-1)&&(b=a.channeled||URL.getQueryString("channeled")||Action.appChanneled)}catch(d){b=Action.appChanneled,Console.log(d)}return b},makeActionParam:function(a){var b={};b.action=a.action||"1.1",b.channeled=a.channeled||"",b.cateCode=a.cateCode,b.enterid=a.enterid,-1!==$(["71","72","73","74","75","76"]).indexOf(a.cid)&&(a.cid="28",a.cateCode="9009"),"1.1"===b.action&&(b.sid=a.sid,b.cid=a.cid,b.site=a.site,b.dataType=a.dataType||"",a.vid&&""!==a.vid&&(b.vid=a.vid),a.ex1&&"1"!==a.ex1&&""!==a.ex1&&(b.ex1=a.ex1),a.ex2&&""!==a.ex2&&(b.ex2=a.ex2),a.ex3&&""!==a.ex3&&(b.ex3=a.ex3),a.appname&&""!==a.appname&&"none"!==a.appname?b.appname=a.appname:b.backpage="0",a.more&&!vars.IsIOS&&(b.more=a.more),vars.IsWindowsPhone&&(b.site=a.site)),("1.2"===b.action||"2.4"===b.action)&&(vars.IsIOS?(b.action="2.4",b.ex1=a.ex1,window.location.href.indexOf("/hots")>-1?(b.cid=a.cid,b.ex2=a.ex2):(b.cid=a.cateCode,b.ex2=a.cid)):(b.action="1.2",b.cid=a.cid,b.cateCode=a.cateCode)),"1.17"===b.action&&(b.ex1=a.ex1,"1"===a.ex1?(b.vid=a.vid,b.cid=a.cid):"3"===a.ex1&&(b.ex2=a.ex2,b.ex3=a.ex3)),"1.18"===b.action&&(b.urls=a.urls||location.href,""!==a.share&&(b.share=a.share||1),""!==a.ex1&&(b.ex1=a.ex1||2),""!==a.ex2&&(b.ex2=a.ex2),""!==a.ex3&&(b.ex3=a.ex3),""!==a.bit0&&(b.bit0=a.bit0),""!==a.bit1&&(b.bit1=a.bit1)),"1.21"===b.action&&(b.more=a.more,b.type=a.type),b.more=a.more||{},b.more.sourcedata=a.more.sourcedata||{};var c=b.more.sourcedata,d=Object.keys(c);c.enterid=a.enterid||"4",c.params=a.params||"uid&passport&plat&clientVer&clientType",c.preid=c.preid||window.location.href;for(var e=0,f=d.length;f>e;e+=1){var g=d[e];console.log(g,c[g]),c[g]=c[g]}if(b.more.sourcedata=c,console.log(b.more.sourcedata),b.more=$.extend(!0,b.more,a.more),b.more=JSON.stringify(b.more),"2.6"===b.action){var h=Action.parserAttributes();h.action="1.18",h.urls=a.urls||window.location.href,h.share="0",h.more={sourcedata:{params:"passport&token&uid&share"}};var i=this.makeActionUrl(h);b.more={sourcedata:{closeWebView:1,callbackAction:i}}}return console.log(b),b},formatArgs:function(a){var b=a.cateCode||"",c=a.channeled||this.getAppChanneled();b=b.toString().split(",")[0]||"",b=b.split(";")[0]||"";var d={action:a.action||"1.1",vid:a.vid||"",sid:a.sid||"",cid:a.cid||"",cateCode:b,dataType:a.dataType||"",share:a.share||"",urls:a.urls||"",h5url:a.h5url||a.url||"",ex1:a.ex1||"1",ex2:a.ex2||"",ex3:a.ex3||"",site:a.site||"",enterid:"4_"+c+"_"+download.channelSrc,bit0:a.bit0||"",bit1:a.bit1||"",type:a.type||6,appname:"none",channeled:c,more:a.more||{}};return"1.1"===a.action&&(9001===a.cid||"2"===a.site)&&(d.ex3=2,d.site="2"),d},makeActionUrl:function(a){var b=this.formatArgs(a),c=this.makeActionParam(b),d="",e=this.URLGlobalParams,f="";return f=/SohuVideoMobile/i.test(vars.UA)||e.clientType&&e.clientVer&&"1"===e.startClient||!cookie.test()?"sohuvideo":"1"===e.startClient||this.isForceIntent()?"intent":"sohuvideo",f.indexOf("intent")>-1?(d="intent://",d+="?"+URL.objToQueryString(c).replace(/index\.html%2C/,"index.html"),d+="#Intent;scheme=sohuvideo;package=com.sohu.sohuvideo;end",Console.log("android intent 1:",JSON.stringify(c))):(d=Action.URLProtocol,d+="action.cmd",d+="?"+URL.objToQueryString(c).replace(/index\.html%2C/,"index.html"),Console.log("sohovideo:",JSON.stringify(c))),Console.log("makeActionUrl : "+d),d},getIframe:function(){var a=$("#j_redirectNativeFrame");return 0===a.length&&(a=$('<iframe id="j_redirectNativeFrame" style="display:none"></iframe>'),$("body").append(a)),a},sendAction:function(a,b){{var c=this.makeActionUrl(a);URL.getQueryData(location.search.substring(1))}if(vars.IsAndroid)"undefined"!=typeof a.type?this.openAndroid(c,b,a.type):this.openAndroid(c,b);else if(vars.IsIOS)this.openIos(c,b);else{var d=this.getIframe();d.attr("src",c)}},updateGlobalParams:function(a,b){var c,d=$("a[href],form",a),e=d.length;for(b=b||Action.URLGlobalParams;e--;)c=d.get(e),URL.setQueryString(c,b)},parserUrls:function(){Action.URLGlobalParams.clientType||Action.URLGlobalParams.actionVer||URL.setQueryString(this,{startClient:1});for(var a,b=["clientType","clientVer","actionVer","startClient","actionId","player","vid","vids","site","srcUrl","poster","title"],c=b.length,d=URL.getQueryData(location.search.substring(1)),e={};c--;)a=b[c],d.hasOwnProperty(a)&&d[a]&&(e[a]=d[a]);Action.URLGlobalParams=e},channelSrcInit:function(){try{return download.channelSrc=URL.getQueryString("src")||URL.getQueryString("SRC")||cookie.get("MTV_SRC")||"0",download.channelSrc=download.channelSrc.replace("|","").replace("%7C",""),download.channelSrc.length>4&&(download.channelSrc=download.channelSrc.substr(0,4)),download.channelSrc=parseInt(download.channelSrc,10),isNaN(download.channelSrc)&&(download.channelSrc="0"),download.channelSrc}catch(a){}},init:function(){this.parserUrls(),this.channelSrcInit(),Action.bindAction()},addIosMeta:function(){var a,b,c=document.createElement("meta"),d="";vars.IsIOS&&(vars.IsIphone&&(d="app-id=458587755",d+=", app-argument=sohuvideo://action.cmd ",d+=", affiliate-data=mt=8",c.setAttribute("content",d),c.setAttribute("name","apple-itunes-app"),a=document.getElementsByTagName("meta"),b=a[0].parentNode,b.appendChild(c)),vars.IsIpad&&(d="app-id=414430589",d+=", app-argument=sohuvideo://action.cmd ",d+=", affiliate-data=mt=8",c.setAttribute("content",d),c.setAttribute("name","apple-itunes-app"),a=document.getElementsByTagName("meta"),b=a[0].parentNode,b.appendChild(c)))},isEnableWebSocket:function(){var a=URL.getQueryData(location.search.substring(1)),b=!0,c=window.VideoData||window.videoData;return location.href.match(/player=1/i)||document.referrer.indexOf("m.sohu.com")>-1?b=!1:"undefined"!=typeof c&&"undefined"!=typeof c.hike&&"1"===c.hike&&(b=!0),"undefined"!=typeof a.startClient&&(b="2"===a.startClient&&this.isIntentList()?!1:!0),("undefined"==typeof c||"undefined"!=typeof c&&"1"===c.mobileLimit||!/^(m|t\.m)\.tv\.sohu\.com$|^192\.168\.199\.186:85$/i.test(window.location.host)||!cookie.test())&&(b=!1),b},parserAttributes:function(data,el){for(var videoParmsKeys=["vid","cid","sid","plid","cateCode","site"],c=videoParmsKeys.length,URLParms=Action.URLGlobalParams,vd=data||window.VideoData||window.videoData||{},args={};c--;){var key=videoParmsKeys[c];vd&&vd[key]&&(args[key]=vd[key]),URLParms&&URLParms.hasOwnProperty(key)&&URLParms[key]&&(args[key]=URLParms[key])}"undefined"!=typeof args.site&&(args.site=args.site+"");var channeled=URLParms.channeled||this.getAppChanneled();channeled=channeled.toString().replace("|","").replace("%7C","");var vid=args.vid||"",sch=Action.URLProtocol,downUrl=args.downUrl||"",actionId=args.actionId||args.actionVer||"1.17";if("undefined"!=typeof el){el=$(el),channeled=el.attr("channeled")||channeled,vid=el.attr("vid")||vid;var _sch=el.attr("data-scheme");_sch&&(sch=_sch.toLowerCase()),downUrl=el.attr("data-downUrl")||el.attr("data-downurl")||downUrl,actionId=el.attr("actionId")||el.attr("actionid")||"1.17",args.action=actionId,args.vid=vid,args.channeled=channeled,args.scheme=sch,args.downUrl=downUrl,args.enterid="4_"+channeled;try{var _params=eval(el.attr("data-params"))||[];for(var i in _params){var jsonObj=_params[i]||{};jsonObj&&$.extend(!0,args,jsonObj)}}catch(e){Console.log(e)}}return vd.site&&"2"===vd.site?args.ex3="2":args.ex1="1",args.action=actionId,args=this.formatArgs(args),args.scheme=sch,args.downUrl=downUrl,Console.log("parserAttributes:",JSON.stringify(args)),args},autoStartClient:function(){var a=!0,b=window.VideoData||window.videoData;this.isEnableWebSocket()||(a=!1),this.isIntentList()&&(a=!1),vars.IsWeixinBrowser&&(a=!1),"undefined"==typeof b||"0"!==b.tabCard&&"1"===b.site&&$.isUndefined(b.liveId)||(a=!1),window.location.href.match(/player=1/i)&&(a=!1),"0"===this.URLGlobalParams.startClient&&(a=!1);var c=Action.parserAttributes();c.action="1.1",c.type="try",download.getChannelInfo(null,function(b){a&&"0"===b.startapp&&(Console.log("发送行为统计点: app_auto_start"),clickTrace.pingback(null,"app_auto_start"),Action.sendAction(c))})},getAppInfo:function(a){var b=Storage.get("localAppInfo");Console.log("localAppInfo ",b),b&&b.time&&Date.now()-b.time<this.maxEffectiveTime&&"function"==typeof a&&a(b)},bindAction:function(){Action.autoStartClient();var a="ontouchstart"in window?"touchend":"mouseup";$("body").on(a,".actionLink",function(){var a=this,b=window.VideoData||window.videoData||{},c=Action.parserAttributes(b,a);c.action="1.1","0"!==download.channelSrc&&"-2"!==download.channelSrc?Action.sendAction(c):vars.IsIOS?Action.sendAction(c,function(){setTimeout(function(){download.gotoDownload()},2e3)}):vars.IsAndroid?Action.isForceIntent()?Action.sendAction(c):Action.getAppInfo(function(a){null===a?(setTimeout(function(){download.gotoDownload()},2e3),Action.sendAction(c)):Action.sendAction(c)}):Action.sendAction(c)})},setPageTitle:function(a){var b,c,a=a||"";if(document.title=a,vars.IsSohuVideoClient&&vars.IsIOS)b=document.createElement("iframe"),b.style.display="none",c=document.body,b.src="js://updateTitle?title="+encodeURIComponent(a),c.appendChild(b),setTimeout(function(){c.removeChild(b)},2e3);else if(vars.IsSohuVideoClient&&(vars.IsAndroid||vars.IsAndroidPad))try{handler.appCallback(4,1,'{"title":"'+a+'"}')}catch(d){}}};Action.init(),window.Action=Action,module.exports=Action}),svp.define("base.codec",function(a,b,c){"use strict";var d=(svp.$,"1.0.2"),e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1),g=function(a){var b,c,d,f,g,h;for(d=a.length,c=0,b="";d>c;){if(f=255&a.charCodeAt(c++),c==d){b+=e.charAt(f>>2),b+=e.charAt((3&f)<<4),b+="==";break}if(g=a.charCodeAt(c++),c==d){b+=e.charAt(f>>2),b+=e.charAt((3&f)<<4|(240&g)>>4),b+=e.charAt((15&g)<<2),b+="=";break}h=a.charCodeAt(c++),b+=e.charAt(f>>2),b+=e.charAt((3&f)<<4|(240&g)>>4),b+=e.charAt((15&g)<<2|(192&h)>>6),b+=e.charAt(63&h)}return b},h=function(a){var b,c,d,e,g,h,i;for(h=a.length,g=0,i="";h>g;){do b=f[255&a.charCodeAt(g++)];while(h>g&&-1==b);if(-1==b)break;do c=f[255&a.charCodeAt(g++)];while(h>g&&-1==c);if(-1==c)break;i+=String.fromCharCode(b<<2|(48&c)>>4);do{if(d=255&a.charCodeAt(g++),61==d)return i;d=f[d]}while(h>g&&-1==d);if(-1==d)break;i+=String.fromCharCode((15&c)<<4|(60&d)>>2);do{if(e=255&a.charCodeAt(g++),61==e)return i;e=f[e]}while(h>g&&-1==e);if(-1==e)break;i+=String.fromCharCode((3&d)<<6|e)}return i},i=function(a){var b,c,d,e;for(b="",d=a.length,c=0;d>c;c++)e=a.charCodeAt(c),e>=1&&127>=e?b+=a.charAt(c):e>2047?(b+=String.fromCharCode(224|e>>12&15),b+=String.fromCharCode(128|e>>6&63),b+=String.fromCharCode(128|e>>0&63)):(b+=String.fromCharCode(192|e>>6&31),b+=String.fromCharCode(128|e>>0&63));return b},j=function(a){var b,c,d,e,f,g;for(b="",d=a.length,c=0;d>c;)switch(e=a.charCodeAt(c++),e>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:b+=a.charAt(c-1);break;case 12:case 13:f=a.charCodeAt(c++),b+=String.fromCharCode((31&e)<<6|63&f);break;case 14:f=a.charCodeAt(c++),g=a.charCodeAt(c++),b+=String.fromCharCode((15&e)<<12|(63&f)<<6|(63&g)<<0)}return b},k=function(a){for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b+=String.fromCharCode(d):d>127&&2048>d?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(63&d|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(63&d|128))}return b},l=function(a){for(var b="",c=0,d=c1=c2=0;c<a.length;)d=a.charCodeAt(c),128>d?(b+=String.fromCharCode(d),c++):d>191&&224>d?(c2=a.charCodeAt(c+1),b+=String.fromCharCode((31&d)<<6|63&c2),c+=2):(c2=a.charCodeAt(c+1),c3=a.charCodeAt(c+2),b+=String.fromCharCode((15&d)<<12|(63&c2)<<6|63&c3),c+=3);return b},m=function(a){var b=j(h(a));return b},n=function(a){var b=g(i(a));return b},o=function(a){for(var b="0x",c=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"),d=0;d<a.length;d++)b+=c[a.charCodeAt(d)>>4]+c[15&a.charCodeAt(d)];return b},p=function(a){for(var b="",c="0x"==a.substr(0,2)?2:0;c<a.length;c+=2)b+=String.fromCharCode(parseInt(a.substr(c,2),16));return b},q=function(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c},r=function(a,b){return a<<b|a>>>32-b},s=function(a,b,c,d,e,f){return q(r(q(q(b,a),q(d,f)),e),c)},t=function(a,b,c,d,e,f,g){return s(b&c|~b&d,a,b,e,f,g)},u=function(a,b,c,d,e,f,g){return s(b&d|c&~d,a,b,e,f,g)},v=function(a,b,c,d,e,f,g){return s(b^c^d,a,b,e,f,g)},w=function(a,b,c,d,e,f,g){return s(c^(b|~d),a,b,e,f,g)},x=function(a,b){a[b>>5]|=128<<b%32,a[(b+64>>>9<<4)+14]=b;var c,d,e,f,g,h=1732584193,i=-271733879,j=-1732584194,k=271733878;for(c=0;c<a.length;c+=16)d=h,e=i,f=j,g=k,h=t(h,i,j,k,a[c],7,-680876936),k=t(k,h,i,j,a[c+1],12,-389564586),j=t(j,k,h,i,a[c+2],17,606105819),i=t(i,j,k,h,a[c+3],22,-1044525330),h=t(h,i,j,k,a[c+4],7,-176418897),k=t(k,h,i,j,a[c+5],12,1200080426),j=t(j,k,h,i,a[c+6],17,-1473231341),i=t(i,j,k,h,a[c+7],22,-45705983),h=t(h,i,j,k,a[c+8],7,1770035416),k=t(k,h,i,j,a[c+9],12,-1958414417),j=t(j,k,h,i,a[c+10],17,-42063),i=t(i,j,k,h,a[c+11],22,-1990404162),h=t(h,i,j,k,a[c+12],7,1804603682),k=t(k,h,i,j,a[c+13],12,-40341101),j=t(j,k,h,i,a[c+14],17,-1502002290),i=t(i,j,k,h,a[c+15],22,1236535329),h=u(h,i,j,k,a[c+1],5,-165796510),k=u(k,h,i,j,a[c+6],9,-1069501632),j=u(j,k,h,i,a[c+11],14,643717713),i=u(i,j,k,h,a[c],20,-373897302),h=u(h,i,j,k,a[c+5],5,-701558691),k=u(k,h,i,j,a[c+10],9,38016083),j=u(j,k,h,i,a[c+15],14,-660478335),i=u(i,j,k,h,a[c+4],20,-405537848),h=u(h,i,j,k,a[c+9],5,568446438),k=u(k,h,i,j,a[c+14],9,-1019803690),j=u(j,k,h,i,a[c+3],14,-187363961),i=u(i,j,k,h,a[c+8],20,1163531501),h=u(h,i,j,k,a[c+13],5,-1444681467),k=u(k,h,i,j,a[c+2],9,-51403784),j=u(j,k,h,i,a[c+7],14,1735328473),i=u(i,j,k,h,a[c+12],20,-1926607734),h=v(h,i,j,k,a[c+5],4,-378558),k=v(k,h,i,j,a[c+8],11,-2022574463),j=v(j,k,h,i,a[c+11],16,1839030562),i=v(i,j,k,h,a[c+14],23,-35309556),h=v(h,i,j,k,a[c+1],4,-1530992060),k=v(k,h,i,j,a[c+4],11,1272893353),j=v(j,k,h,i,a[c+7],16,-155497632),i=v(i,j,k,h,a[c+10],23,-1094730640),h=v(h,i,j,k,a[c+13],4,681279174),k=v(k,h,i,j,a[c],11,-358537222),j=v(j,k,h,i,a[c+3],16,-722521979),i=v(i,j,k,h,a[c+6],23,76029189),h=v(h,i,j,k,a[c+9],4,-640364487),k=v(k,h,i,j,a[c+12],11,-421815835),j=v(j,k,h,i,a[c+15],16,530742520),i=v(i,j,k,h,a[c+2],23,-995338651),h=w(h,i,j,k,a[c],6,-198630844),k=w(k,h,i,j,a[c+7],10,1126891415),j=w(j,k,h,i,a[c+14],15,-1416354905),i=w(i,j,k,h,a[c+5],21,-57434055),h=w(h,i,j,k,a[c+12],6,1700485571),k=w(k,h,i,j,a[c+3],10,-1894986606),j=w(j,k,h,i,a[c+10],15,-1051523),i=w(i,j,k,h,a[c+1],21,-2054922799),h=w(h,i,j,k,a[c+8],6,1873313359),k=w(k,h,i,j,a[c+15],10,-30611744),j=w(j,k,h,i,a[c+6],15,-1560198380),i=w(i,j,k,h,a[c+13],21,1309151649),h=w(h,i,j,k,a[c+4],6,-145523070),k=w(k,h,i,j,a[c+11],10,-1120210379),j=w(j,k,h,i,a[c+2],15,718787259),i=w(i,j,k,h,a[c+9],21,-343485551),h=q(h,d),i=q(i,e),j=q(j,f),k=q(k,g);return[h,i,j,k]},y=function(a){var b,c="";for(b=0;b<32*a.length;b+=8)c+=String.fromCharCode(a[b>>5]>>>b%32&255);return c},z=function(a){var b,c=[];for(c[(a.length>>2)-1]=void 0,b=0;b<c.length;b+=1)c[b]=0;for(b=0;b<8*a.length;b+=8)c[b>>5]|=(255&a.charCodeAt(b/8))<<b%32;return c},A=function(a){return y(x(z(a),8*a.length))},B=function(a,b){var c,d,e=z(a),f=[],g=[];for(f[15]=g[15]=void 0,e.length>16&&(e=x(e,8*a.length)),c=0;16>c;c+=1)f[c]=909522486^e[c],g[c]=1549556828^e[c];return d=x(f.concat(z(b)),512+8*b.length),y(x(g.concat(d),640))},C=function(a){var b,c,d="0123456789abcdef",e="";for(c=0;c<a.length;c+=1)b=a.charCodeAt(c),e+=d.charAt(b>>>4&15)+d.charAt(15&b);return e},D=function(a){return unescape(encodeURIComponent(a))},E=function(a){return A(D(a))},F=function(a){return C(E(a))},G=function(a,b){return B(D(a),D(b))},H=function(a,b){return C(G(a,b))},I=function(a,b,c){return b?c?G(b,a):H(b,a):c?E(a):F(a)};c.exports={version:d,base64encodechars:e,base64decodechars:f,encode:g,decode:h,utf16to8:i,utf8to16:j,utf8Encode:k,utf8Decode:l,binl2rstr:y,rstr2binl:z,str2rstr_utf8:D,stringToHex:o,hexToString:p,decodeUtf8to16Data64:m,encodeUtf16to8Data64:n,md5:I}}),svp.define("base.console",function(a,b,c){"use strict";var d=a("base.vars"),e={level:"info",dateFormat:"yyyyMMdd hh:mm:ss",DOM:null,line:'<p class="Console-line"></p>',tgt:'<div id="Console-log" style="opacity:0.7;position: fixed; top: 0; max-height: 105px;-webkit-overflow-scrolling:touch;overflow:auto;line-height:1.5;z-index:5000;width:100%;font-size:11px;background:rgba(0,0,0,.8);color:#fff;bottom:0;-webkit-user-select: initial;"></div>',style:"<style>.Console-line{ margin-top:-1px;padding:.5em;border-top:1px solid rgba(255,255,255,.3);width:70% } .c_info .c_log { color:white; } .c_error { color:red; } .c_warn { color:yellow; } .c_debug { color:green; } </style>",inited:!1},f={},g={};g.getType=function(a){var b,c=a;return("object"==(b=typeof c)?null===c&&"null"||Object.prototype.toString.call(c).slice(8,-1):b).toLowerCase()},g.DateFormat=function(a,b){var c={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};try{/(y+)/.test(b)&&(b=b.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(var d in c)new RegExp("("+d+")").test(b)&&(b=b.replace(RegExp.$1,1===RegExp.$1.length?c[d]:("00"+c[d]).substr((""+c[d]).length)))}catch(e){console.log(e)}return b},f.logObj=function(a){var b=a||"INFO",c={timestamp:f.getTimestamp(),level:b};return c},f.applyData=function(a){a.alisLevel=a.level.toUpperCase().substring(0,1);var b=[" [ ",a.level," ] "].join("");return b},f.getTimestamp=function(){return g.DateFormat(new Date,e.dateFormat)},f.output=function(a,b,c){if("undefined"!=typeof b&&"undefined"!=typeof c?console.log(b,c):"undefined"!=typeof b&&console.log(b),d.ENABLE_DEBUG)try{e.inited||f.init();var g=document.createElement("div");g.className="c_"+a.level.toLowerCase()||"c_info";var h=f.applyData(a)+" "+b;"undefined"!=typeof c&&(h+=", "+c),g.innerHTML=h,$(".c_log").length>0?e.DOM.insertBefore(g,$(".c_log")[0]):e.DOM.appendChild(g)}catch(i){console.log("exception :"+i)}},f.init=function(){if(!e.inited){var a=document.createElement("style");a.innerHTML=e.style,document.body.appendChild(a);var b=document.createElement("div");b.innerHTML=e.tgt,document.body.appendChild(b),e.DOM=document.getElementById("Console-log"),e.inited=!0}},e.log=function(a,b){var c=f.logObj("LOG");f.output(c,a,b)},e.debug=function(a,b){var c=f.logObj("DEBUG");f.output(c,a,b)},e.info=function(a,b){var c=f.logObj("INFO");f.output(c,a,b)},e.error=function(a,b){var c=f.logObj("ERROR");f.output(c,a,b)},e.warn=function(a,b){var c=f.logObj("WARN");f.output(c,a,b)},window.Console=e,c.exports=e}),svp.define("base.cookie",function(a,b,c){"use strict";var d=svp.$,e=a("base.vars"),f=a("base.util"),g=a("base.console"),h={isEnabled:!1,set:function(a,b,c,d){var e="";if(0!==c){var f=new Date;f.setTime(f.getTime()+36e5*(c||24)),e=";expires="+f.toGMTString()}var g=escape(a)+"="+escape(b)+e+";path=/"+(d?";domain="+d:"");return document.cookie=g,!0},get:function(a){for(var b=document.cookie.split(";"),c=0;c<b.length;c++){var d=b[c],e=d.indexOf("="),f=d.substr(0,e),g=d.substr(e+1);if(f.trim()===a)return"SOHUSVP"===a||"sohusvp"===a?g:unescape(g)}return""},del:function(a,b,c){var d=new Date;d.setTime(d.getTime()-1),document.cookie=a+"=; expires="+d.toGMTString()+";"+(c?"path="+c+"; ":"path=/; ")+(b?"domain="+b+";":"domain=;")},test:function(){var a="_c_t_";return this.set(a,"1"),this.isEnabled="1"===this.get(a),this.del(a),this.isEnabled},serialize:function(a){return JSON.stringify(a)},deserialize:function(a){if("string"!=typeof a)return a;try{return JSON.parse(a)}catch(b){return a||{}}},setSession:function(a,b){try{window.sessionStorage&&window.sessionStorage.setItem(a,this.serialize(b))}catch(c){g.log("not support session",c),this.set(a,this.serialize(b),24)}},getSession:function(a){var b="";try{window.sessionStorage&&(b=this.deserialize(window.sessionStorage.getItem(a)))}catch(c){g.log("not support session",c),b=this.deserialize(this.get(a))}return b},gMD:function(a){var b;if(a===b||null===a)return null;var c,d=a.length;return c="."===a.charAt(d-3)?a.lastIndexOf(".",a.lastIndexOf(".",d-=a.indexOf(".com.")>0?8:4)):a.lastIndexOf(".",a.lastIndexOf(".")-1),c=-1===c?0:++c,a.substring(c)},_init:function(){var a=document.domain||"127.0.0.1",b=e.H5Src=d.getUrlParam("src")||d.getUrlParam("SRC")||"";b&&(h.set("MTV_SRC",e.H5Src,86400,".sohu.com"),h.set("MTV_SRC",e.H5Src,86400,a)),e.H5Src=h.get("MTV_SRC")||b;var c=h.get("SUV")||"",i=h.get("IPLOC")||"";if(g.log("init ck cookieSUV "+c+" cookieIPLOC "+i),c&&i)g.log("ck not write");else{var j=f.createUUID();i||e.IS_EXTERNAL_PLAYER||svp.seajs.jsLoader("http://pv.sohu.com/suv/"+j,function(){h.set("SUV",j,5e5,".sohu.com"),g.log("callback cookieSUV "+h.get("SUV")+" cookieIPLOC "+h.get("IPLOC"))}),c||(h.set("SUV",j,5e5,".sohu.com"),h.set("SUV",j,5e5,a),h.set("H5UID",j,5e5,a))}}};h.test(),h._init(),window.Cookie=h,c.exports=h}),svp.define("base.errorTypes",function(a,b,c){"use strict";var d={COPYRIGHT:{100:"您所在的国家或地区，不在所播放的节目版权范围",101:"该视频版权已到期，无法观看",102:"观看本集请前往搜狐视频客户端"},PROCESS:{200:"数据处理完成",201:"无效视频数据,请刷新重试",202:"无效视频数据",203:"数据结构错误",204:"解析数据出错"},SUPPORT:{300:"您的浏览器不支持播放功能，请使用搜狐视频客户端",301:"该视频目前只支持5分钟观看，观看完整视频，请使用搜狐视频客户端",302:"UC浏览器不支持播放功能，建议使用系统浏览器或请使用搜狐视频客户端",303:"直播请使用搜狐视频客户端",304:"本片仅供试看，如果需要观看更多内容，请下载搜狐视频App",305:"您的浏览器不支持直播功能，请使用搜狐视频客户端",306:"播放地址无效，如果需要观看更多内容，请下载搜狐视频App"},REQUEST:{400:"网络超时，请刷新重试",401:"mysugar接口请求错误",402:"video/info接口请求参数错误",403:"video/info接口请求错误",404:"video/info ugc接口请求错误",405:"play/urls接口请求参数错误",406:"play/urls接口请求错误",407:"live/url接口请求失败"},COMMON:{500:"加载资源失败 code: "},UPLOAD:{600:"上传失败! fileInput参数错误",601:"上传失败! 上传内容不符合要求！",602:"上传失败! 图片格式不符合要求！",603:"上传失败! 服务器错误！",604:"上传失败! 用户数据错误！"}};c.exports=d}),function(a,b){function c(a){return""===f?a:(a=a.charAt(0).toUpperCase()+a.substr(1),f+a)}var d=Math,e=b.createElement("div").style,f=function(){for(var a,b="t,webkitT,MozT,msT,OT".split(","),c=0,d=b.length;d>c;c++)if(a=b[c]+"ransform",a in e)return b[c].substr(0,b[c].length-1);return!1}(),g=f?"-"+f.toLowerCase()+"-":"",h=c("transform"),i=c("transitionProperty"),j=c("transitionDuration"),k=c("transformOrigin"),l=c("transitionTimingFunction"),m=c("transitionDelay"),n=/android/gi.test(navigator.appVersion),o=/iphone|ipad/gi.test(navigator.appVersion),p=/hp-tablet/gi.test(navigator.appVersion),q=c("perspective")in e,r="ontouchstart"in a&&!p,s=!!f,t=c("transition")in e,u="onorientationchange"in a?"orientationchange":"resize",v=r?"touchstart":"mousedown",w=r?"touchmove":"mousemove",x=r?"touchend":"mouseup",y=r?"touchcancel":"mouseup",z="Moz"==f?"DOMMouseScroll":"mousewheel",A=function(){if(f===!1)return!1;var a={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"oTransitionEnd",ms:"MSTransitionEnd"};return a[f]}(),B=function(){return a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(a){return setTimeout(a,1)}}(),C=function(){return a.cancelRequestAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame||a.mozCancelRequestAnimationFrame||a.oCancelRequestAnimationFrame||a.msCancelRequestAnimationFrame||clearTimeout}(),D=q?" translateZ(0)":"",E=function(c,d){var e,f=this;f.wrapper="object"==typeof c?c:b.getElementById(c),f.wrapper.style.overflow="hidden",f.scroller=f.wrapper.children[0],f.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:n,hideScrollbar:o,fadeScrollbar:o&&q,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(a){a.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(e in d)f.options[e]=d[e];f.x=f.options.x,f.y=f.options.y,f.options.useTransform=s&&f.options.useTransform,f.options.hScrollbar=f.options.hScroll&&f.options.hScrollbar,f.options.vScrollbar=f.options.vScroll&&f.options.vScrollbar,f.options.zoom=f.options.useTransform&&f.options.zoom,f.options.useTransition=t&&f.options.useTransition,f.options.zoom&&n&&(D=""),f.scroller.style[i]=f.options.useTransform?g+"transform":"top left",f.scroller.style[j]="0",f.scroller.style[k]="0 0",f.options.useTransition&&(f.scroller.style[l]="cubic-bezier(0.33,0.66,0.66,1)"),f.options.useTransform?f.scroller.style[h]="translate("+f.x+"px,"+f.y+"px)"+D:f.scroller.style.cssText+=";position:absolute;top:"+f.y+"px;left:"+f.x+"px",f.options.useTransition&&(f.options.fixedScrollbar=!0),f.refresh(),f._bind(u,a),f._bind(v),r||(f._bind("mouseout",f.wrapper),"none"!=f.options.wheelAction&&f._bind(z)),f.options.checkDOMChanges&&(f.checkDOMTime=setInterval(function(){f._checkDOMChanges()},500))};E.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(a){var b=this;switch(a.type){case v:if(!r&&0!==a.button)return;b._start(a);break;case w:b._move(a);break;case x:case y:b._end(a);break;case u:b._resize();break;case z:b._wheel(a);break;case"mouseout":b._mouseout(a);break;case A:b._transitionEnd(a)}},_checkDOMChanges:function(){this.moved||this.zoomed||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale||this.refresh()},_scrollbar:function(a){var c,e=this;return e[a+"Scrollbar"]?(e[a+"ScrollbarWrapper"]||(c=b.createElement("div"),e.options.scrollbarClass?c.className=e.options.scrollbarClass+a.toUpperCase():c.style.cssText="position:absolute;z-index:100;"+("h"==a?"height:7px;bottom:1px;left:2px;right:"+(e.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(e.hScrollbar?"7":"2")+"px;top:2px;right:1px"),c.style.cssText+=";pointer-events:none;"+g+"transition-property:opacity;"+g+"transition-duration:"+(e.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(e.options.hideScrollbar?"0":"1"),e.wrapper.appendChild(c),e[a+"ScrollbarWrapper"]=c,c=b.createElement("div"),e.options.scrollbarClass||(c.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+g+"background-clip:padding-box;"+g+"box-sizing:border-box;"+("h"==a?"height:100%":"width:100%")+";"+g+"border-radius:3px;border-radius:3px"),c.style.cssText+=";pointer-events:none;"+g+"transition-property:"+g+"transform;"+g+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+g+"transition-duration:0;"+g+"transform: translate(0,0)"+D,e.options.useTransition&&(c.style.cssText+=";"+g+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),e[a+"ScrollbarWrapper"].appendChild(c),e[a+"ScrollbarIndicator"]=c),"h"==a?(e.hScrollbarSize=e.hScrollbarWrapper.clientWidth,e.hScrollbarIndicatorSize=d.max(d.round(e.hScrollbarSize*e.hScrollbarSize/e.scrollerW),8),e.hScrollbarIndicator.style.width=e.hScrollbarIndicatorSize+"px",e.hScrollbarMaxScroll=e.hScrollbarSize-e.hScrollbarIndicatorSize,e.hScrollbarProp=e.hScrollbarMaxScroll/e.maxScrollX):(e.vScrollbarSize=e.vScrollbarWrapper.clientHeight,e.vScrollbarIndicatorSize=d.max(d.round(e.vScrollbarSize*e.vScrollbarSize/e.scrollerH),8),e.vScrollbarIndicator.style.height=e.vScrollbarIndicatorSize+"px",e.vScrollbarMaxScroll=e.vScrollbarSize-e.vScrollbarIndicatorSize,e.vScrollbarProp=e.vScrollbarMaxScroll/e.maxScrollY),void e._scrollbarPos(a,!0)):void(e[a+"ScrollbarWrapper"]&&(s&&(e[a+"ScrollbarIndicator"].style[h]=""),e[a+"ScrollbarWrapper"].parentNode.removeChild(e[a+"ScrollbarWrapper"]),e[a+"ScrollbarWrapper"]=null,e[a+"ScrollbarIndicator"]=null))},_resize:function(){var a=this;setTimeout(function(){a.refresh()},n?200:0)},_pos:function(a,b){this.zoomed||(a=this.hScroll?a:0,b=this.vScroll?b:0,this.options.useTransform?this.scroller.style[h]="translate("+a+"px,"+b+"px) scale("+this.scale+")"+D:(a=d.round(a),b=d.round(b),this.scroller.style.left=a+"px",this.scroller.style.top=b+"px"),this.x=a,this.y=b,this._scrollbarPos("h"),this._scrollbarPos("v"))},_scrollbarPos:function(a,b){var c,e=this,f="h"==a?e.x:e.y;e[a+"Scrollbar"]&&(f=e[a+"ScrollbarProp"]*f,0>f?(e.options.fixedScrollbar||(c=e[a+"ScrollbarIndicatorSize"]+d.round(3*f),8>c&&(c=8),e[a+"ScrollbarIndicator"].style["h"==a?"width":"height"]=c+"px"),f=0):f>e[a+"ScrollbarMaxScroll"]&&(e.options.fixedScrollbar?f=e[a+"ScrollbarMaxScroll"]:(c=e[a+"ScrollbarIndicatorSize"]-d.round(3*(f-e[a+"ScrollbarMaxScroll"])),8>c&&(c=8),e[a+"ScrollbarIndicator"].style["h"==a?"width":"height"]=c+"px",f=e[a+"ScrollbarMaxScroll"]+(e[a+"ScrollbarIndicatorSize"]-c))),e[a+"ScrollbarWrapper"].style[m]="0",e[a+"ScrollbarWrapper"].style.opacity=b&&e.options.hideScrollbar?"0":"1",e[a+"ScrollbarIndicator"].style[h]="translate("+("h"==a?f+"px,0)":"0,"+f+"px)")+D)},_start:function(a){var b,c,e,f,g,i=this,j=r?a.touches[0]:a;i.enabled&&(i.options.onBeforeScrollStart&&i.options.onBeforeScrollStart.call(i,a),(i.options.useTransition||i.options.zoom)&&i._transitionTime(0),i.moved=!1,i.animating=!1,i.zoomed=!1,i.distX=0,i.distY=0,i.absDistX=0,i.absDistY=0,i.dirX=0,i.dirY=0,i.options.zoom&&r&&a.touches.length>1&&(f=d.abs(a.touches[0].pageX-a.touches[1].pageX),g=d.abs(a.touches[0].pageY-a.touches[1].pageY),i.touchesDistStart=d.sqrt(f*f+g*g),i.originX=d.abs(a.touches[0].pageX+a.touches[1].pageX-2*i.wrapperOffsetLeft)/2-i.x,i.originY=d.abs(a.touches[0].pageY+a.touches[1].pageY-2*i.wrapperOffsetTop)/2-i.y,i.options.onZoomStart&&i.options.onZoomStart.call(i,a)),i.options.momentum&&(i.options.useTransform?(b=getComputedStyle(i.scroller,null)[h].replace(/[^0-9\-.,]/g,"").split(","),c=1*b[4],e=1*b[5]):(c=1*getComputedStyle(i.scroller,null).left.replace(/[^0-9-]/g,""),e=1*getComputedStyle(i.scroller,null).top.replace(/[^0-9-]/g,"")),(c!=i.x||e!=i.y)&&(i.options.useTransition?i._unbind(A):C(i.aniTime),i.steps=[],i._pos(c,e))),i.absStartX=i.x,i.absStartY=i.y,i.startX=i.x,i.startY=i.y,i.pointX=j.pageX,i.pointY=j.pageY,i.startTime=a.timeStamp||Date.now(),i.options.onScrollStart&&i.options.onScrollStart.call(i,a),i._bind(w),i._bind(x),i._bind(y))
},_move:function(a){var b,c,e,f=this,g=r?a.touches[0]:a,i=g.pageX-f.pointX,j=g.pageY-f.pointY,k=f.x+i,l=f.y+j,m=a.timeStamp||Date.now();return f.options.onBeforeScrollMove&&f.options.onBeforeScrollMove.call(f,a),f.options.zoom&&r&&a.touches.length>1?(b=d.abs(a.touches[0].pageX-a.touches[1].pageX),c=d.abs(a.touches[0].pageY-a.touches[1].pageY),f.touchesDist=d.sqrt(b*b+c*c),f.zoomed=!0,e=1/f.touchesDistStart*f.touchesDist*this.scale,e<f.options.zoomMin?e=.5*f.options.zoomMin*Math.pow(2,e/f.options.zoomMin):e>f.options.zoomMax&&(e=2*f.options.zoomMax*Math.pow(.5,f.options.zoomMax/e)),f.lastScale=e/this.scale,k=this.originX-this.originX*f.lastScale+this.x,l=this.originY-this.originY*f.lastScale+this.y,this.scroller.style[h]="translate("+k+"px,"+l+"px) scale("+e+")"+D,void(f.options.onZoom&&f.options.onZoom.call(f,a))):(f.pointX=g.pageX,f.pointY=g.pageY,(k>0||k<f.maxScrollX)&&(k=f.options.bounce?f.x+i/2:k>=0||f.maxScrollX>=0?0:f.maxScrollX),(l>f.minScrollY||l<f.maxScrollY)&&(l=f.options.bounce?f.y+j/2:l>=f.minScrollY||f.maxScrollY>=0?f.minScrollY:f.maxScrollY),f.distX+=i,f.distY+=j,f.absDistX=d.abs(f.distX),f.absDistY=d.abs(f.distY),void(f.absDistX<6&&f.absDistY<6||(f.options.lockDirection&&(f.absDistX>f.absDistY+5?(l=f.y,j=0):f.absDistY>f.absDistX+5&&(k=f.x,i=0)),f.moved=!0,f._pos(k,l),f.dirX=i>0?-1:0>i?1:0,f.dirY=j>0?-1:0>j?1:0,m-f.startTime>300&&(f.startTime=m,f.startX=f.x,f.startY=f.y),f.options.onScrollMove&&f.options.onScrollMove.call(f,a))))},_end:function(a){if(!r||0===a.touches.length){var c,e,f,g,i,k,l,m=this,n=r?a.changedTouches[0]:a,o={dist:0,time:0},p={dist:0,time:0},q=(a.timeStamp||Date.now())-m.startTime,s=m.x,t=m.y;if(m._unbind(w),m._unbind(x),m._unbind(y),m.options.onBeforeScrollEnd&&m.options.onBeforeScrollEnd.call(m,a),m.zoomed)return l=m.scale*m.lastScale,l=Math.max(m.options.zoomMin,l),l=Math.min(m.options.zoomMax,l),m.lastScale=l/m.scale,m.scale=l,m.x=m.originX-m.originX*m.lastScale+m.x,m.y=m.originY-m.originY*m.lastScale+m.y,m.scroller.style[j]="200ms",m.scroller.style[h]="translate("+m.x+"px,"+m.y+"px) scale("+m.scale+")"+D,m.zoomed=!1,m.refresh(),void(m.options.onZoomEnd&&m.options.onZoomEnd.call(m,a));if(!m.moved)return r&&(m.doubleTapTimer&&m.options.zoom?(clearTimeout(m.doubleTapTimer),m.doubleTapTimer=null,m.options.onZoomStart&&m.options.onZoomStart.call(m,a),m.zoom(m.pointX,m.pointY,1==m.scale?m.options.doubleTapZoom:1),m.options.onZoomEnd&&setTimeout(function(){m.options.onZoomEnd.call(m,a)},200)):this.options.handleClick&&(m.doubleTapTimer=setTimeout(function(){for(m.doubleTapTimer=null,c=n.target;1!=c.nodeType;)c=c.parentNode;"SELECT"!=c.tagName&&"INPUT"!=c.tagName&&"TEXTAREA"!=c.tagName&&(e=b.createEvent("MouseEvents"),e.initMouseEvent("click",!0,!0,a.view,1,n.screenX,n.screenY,n.clientX,n.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null),e._fake=!0,c.dispatchEvent(e))},m.options.zoom?250:0))),m._resetPos(200),void(m.options.onTouchEnd&&m.options.onTouchEnd.call(m,a));if(300>q&&m.options.momentum&&(o=s?m._momentum(s-m.startX,q,-m.x,m.scrollerW-m.wrapperW+m.x,m.options.bounce?m.wrapperW:0):o,p=t?m._momentum(t-m.startY,q,-m.y,m.maxScrollY<0?m.scrollerH-m.wrapperH+m.y-m.minScrollY:0,m.options.bounce?m.wrapperH:0):p,s=m.x+o.dist,t=m.y+p.dist,(m.x>0&&s>0||m.x<m.maxScrollX&&s<m.maxScrollX)&&(o={dist:0,time:0}),(m.y>m.minScrollY&&t>m.minScrollY||m.y<m.maxScrollY&&t<m.maxScrollY)&&(p={dist:0,time:0})),o.dist||p.dist)return i=d.max(d.max(o.time,p.time),10),m.options.snap&&(f=s-m.absStartX,g=t-m.absStartY,d.abs(f)<m.options.snapThreshold&&d.abs(g)<m.options.snapThreshold?m.scrollTo(m.absStartX,m.absStartY,200):(k=m._snap(s,t),s=k.x,t=k.y,i=d.max(k.time,i))),m.scrollTo(d.round(s),d.round(t),i),void(m.options.onTouchEnd&&m.options.onTouchEnd.call(m,a));if(m.options.snap)return f=s-m.absStartX,g=t-m.absStartY,d.abs(f)<m.options.snapThreshold&&d.abs(g)<m.options.snapThreshold?m.scrollTo(m.absStartX,m.absStartY,200):(k=m._snap(m.x,m.y),(k.x!=m.x||k.y!=m.y)&&m.scrollTo(k.x,k.y,k.time)),void(m.options.onTouchEnd&&m.options.onTouchEnd.call(m,a));m._resetPos(200),m.options.onTouchEnd&&m.options.onTouchEnd.call(m,a)}},_resetPos:function(a){var b=this,c=b.x>=0?0:b.x<b.maxScrollX?b.maxScrollX:b.x,d=b.y>=b.minScrollY||b.maxScrollY>0?b.minScrollY:b.y<b.maxScrollY?b.maxScrollY:b.y;return c==b.x&&d==b.y?(b.moved&&(b.moved=!1,b.options.onScrollEnd&&b.options.onScrollEnd.call(b)),b.hScrollbar&&b.options.hideScrollbar&&("webkit"==f&&(b.hScrollbarWrapper.style[m]="300ms"),b.hScrollbarWrapper.style.opacity="0"),void(b.vScrollbar&&b.options.hideScrollbar&&("webkit"==f&&(b.vScrollbarWrapper.style[m]="300ms"),b.vScrollbarWrapper.style.opacity="0"))):void b.scrollTo(c,d,a||0)},_wheel:function(a){var b,c,d,e,f,g=this;if("wheelDeltaX"in a)b=a.wheelDeltaX/12,c=a.wheelDeltaY/12;else if("wheelDelta"in a)b=c=a.wheelDelta/12;else{if(!("detail"in a))return;b=c=3*-a.detail}return"zoom"==g.options.wheelAction?(f=g.scale*Math.pow(2,1/3*(c?c/Math.abs(c):0)),f<g.options.zoomMin&&(f=g.options.zoomMin),f>g.options.zoomMax&&(f=g.options.zoomMax),void(f!=g.scale&&(!g.wheelZoomCount&&g.options.onZoomStart&&g.options.onZoomStart.call(g,a),g.wheelZoomCount++,g.zoom(a.pageX,a.pageY,f,400),setTimeout(function(){g.wheelZoomCount--,!g.wheelZoomCount&&g.options.onZoomEnd&&g.options.onZoomEnd.call(g,a)},400)))):(d=g.x+b,e=g.y+c,d>0?d=0:d<g.maxScrollX&&(d=g.maxScrollX),e>g.minScrollY?e=g.minScrollY:e<g.maxScrollY&&(e=g.maxScrollY),void(g.maxScrollY<0&&g.scrollTo(d,e,0)))},_mouseout:function(a){var b=a.relatedTarget;if(!b)return void this._end(a);for(;b=b.parentNode;)if(b==this.wrapper)return;this._end(a)},_transitionEnd:function(a){var b=this;a.target==b.scroller&&(b._unbind(A),b._startAni())},_startAni:function(){var a,b,c,e=this,f=e.x,g=e.y,h=Date.now();if(!e.animating){if(!e.steps.length)return void e._resetPos(400);if(a=e.steps.shift(),a.x==f&&a.y==g&&(a.time=0),e.animating=!0,e.moved=!0,e.options.useTransition)return e._transitionTime(a.time),e._pos(a.x,a.y),e.animating=!1,void(a.time?e._bind(A):e._resetPos(0));c=function(){var i,j,k=Date.now();return k>=h+a.time?(e._pos(a.x,a.y),e.animating=!1,e.options.onAnimationEnd&&e.options.onAnimationEnd.call(e),void e._startAni()):(k=(k-h)/a.time-1,b=d.sqrt(1-k*k),i=(a.x-f)*b+f,j=(a.y-g)*b+g,e._pos(i,j),void(e.animating&&(e.aniTime=B(c))))},c()}},_transitionTime:function(a){a+="ms",this.scroller.style[j]=a,this.hScrollbar&&(this.hScrollbarIndicator.style[j]=a),this.vScrollbar&&(this.vScrollbarIndicator.style[j]=a)},_momentum:function(a,b,c,e,f){var g=6e-4,h=d.abs(a)/b,i=h*h/(2*g),j=0,k=0;return a>0&&i>c?(k=f/(6/(i/h*g)),c+=k,h=h*c/i,i=c):0>a&&i>e&&(k=f/(6/(i/h*g)),e+=k,h=h*e/i,i=e),i*=0>a?-1:1,j=h/g,{dist:i,time:d.round(j)}},_offset:function(a){for(var b=-a.offsetLeft,c=-a.offsetTop;a=a.offsetParent;)b-=a.offsetLeft,c-=a.offsetTop;return a!=this.wrapper&&(b*=this.scale,c*=this.scale),{left:b,top:c}},_snap:function(a,b){var c,e,f,g,h,i,j=this;for(f=j.pagesX.length-1,c=0,e=j.pagesX.length;e>c;c++)if(a>=j.pagesX[c]){f=c;break}for(f==j.currPageX&&f>0&&j.dirX<0&&f--,a=j.pagesX[f],h=d.abs(a-j.pagesX[j.currPageX]),h=h?d.abs(j.x-a)/h*500:0,j.currPageX=f,f=j.pagesY.length-1,c=0;f>c;c++)if(b>=j.pagesY[c]){f=c;break}return f==j.currPageY&&f>0&&j.dirY<0&&f--,b=j.pagesY[f],i=d.abs(b-j.pagesY[j.currPageY]),i=i?d.abs(j.y-b)/i*500:0,j.currPageY=f,g=d.round(d.max(h,i))||200,{x:a,y:b,time:g}},_bind:function(a,b,c){(b||this.scroller).addEventListener(a,this,!!c)},_unbind:function(a,b,c){(b||this.scroller).removeEventListener(a,this,!!c)},destroy:function(){var b=this;b.scroller.style[h]="",b.hScrollbar=!1,b.vScrollbar=!1,b._scrollbar("h"),b._scrollbar("v"),b._unbind(u,a),b._unbind(v),b._unbind(w),b._unbind(x),b._unbind(y),b.options.hasTouch||(b._unbind("mouseout",b.wrapper),b._unbind(z)),b.options.useTransition&&b._unbind(A),b.options.checkDOMChanges&&clearInterval(b.checkDOMTime),b.options.onDestroy&&b.options.onDestroy.call(b)},refresh:function(){var a,b,c,e,f=this,g=0,h=0;if(f.scale<f.options.zoomMin&&(f.scale=f.options.zoomMin),f.wrapperW=f.wrapper.clientWidth||1,f.wrapperH=f.wrapper.clientHeight||1,f.minScrollY=-f.options.topOffset||0,f.scrollerW=d.round(f.scroller.offsetWidth*f.scale),f.scrollerH=d.round((f.scroller.offsetHeight+f.minScrollY)*f.scale),f.maxScrollX=f.wrapperW-f.scrollerW,f.maxScrollY=f.wrapperH-f.scrollerH+f.minScrollY,f.dirX=0,f.dirY=0,f.options.onRefresh&&f.options.onRefresh.call(f),f.hScroll=f.options.hScroll&&f.maxScrollX<0,f.vScroll=f.options.vScroll&&(!f.options.bounceLock&&!f.hScroll||f.scrollerH>f.wrapperH),f.hScrollbar=f.hScroll&&f.options.hScrollbar,f.vScrollbar=f.vScroll&&f.options.vScrollbar&&f.scrollerH>f.wrapperH,a=f._offset(f.wrapper),f.wrapperOffsetLeft=-a.left,f.wrapperOffsetTop=-a.top,"string"==typeof f.options.snap)for(f.pagesX=[],f.pagesY=[],e=f.scroller.querySelectorAll(f.options.snap),b=0,c=e.length;c>b;b++)g=f._offset(e[b]),g.left+=f.wrapperOffsetLeft,g.top+=f.wrapperOffsetTop,f.pagesX[b]=g.left<f.maxScrollX?f.maxScrollX:g.left*f.scale,f.pagesY[b]=g.top<f.maxScrollY?f.maxScrollY:g.top*f.scale;else if(f.options.snap){for(f.pagesX=[];g>=f.maxScrollX;)f.pagesX[h]=g,g-=f.wrapperW,h++;for(f.maxScrollX%f.wrapperW&&(f.pagesX[f.pagesX.length]=f.maxScrollX-f.pagesX[f.pagesX.length-1]+f.pagesX[f.pagesX.length-1]),g=0,h=0,f.pagesY=[];g>=f.maxScrollY;)f.pagesY[h]=g,g-=f.wrapperH,h++;f.maxScrollY%f.wrapperH&&(f.pagesY[f.pagesY.length]=f.maxScrollY-f.pagesY[f.pagesY.length-1]+f.pagesY[f.pagesY.length-1])}f._scrollbar("h"),f._scrollbar("v"),f.zoomed||(f.scroller.style[j]="0",f._resetPos(200))},scrollTo:function(a,b,c,d){var e,f,g=this,h=a;for(g.stop(),h.length||(h=[{x:a,y:b,time:c,relative:d}]),e=0,f=h.length;f>e;e++)h[e].relative&&(h[e].x=g.x-h[e].x,h[e].y=g.y-h[e].y),g.steps.push({x:h[e].x,y:h[e].y,time:h[e].time||0});g._startAni()},scrollToElement:function(a,b){var c,e=this;a=a.nodeType?a:e.scroller.querySelector(a),a&&(c=e._offset(a),c.left+=e.wrapperOffsetLeft,c.top+=e.wrapperOffsetTop,c.left=c.left>0?0:c.left<e.maxScrollX?e.maxScrollX:c.left,c.top=c.top>e.minScrollY?e.minScrollY:c.top<e.maxScrollY?e.maxScrollY:c.top,b=void 0===b?d.max(2*d.abs(c.left),2*d.abs(c.top)):b,e.scrollTo(c.left,c.top,b))},scrollToPage:function(a,b,c){var d,e,f=this;c=void 0===c?400:c,f.options.onScrollStart&&f.options.onScrollStart.call(f),f.options.snap?(a="next"==a?f.currPageX+1:"prev"==a?f.currPageX-1:a,b="next"==b?f.currPageY+1:"prev"==b?f.currPageY-1:b,a=0>a?0:a>f.pagesX.length-1?f.pagesX.length-1:a,b=0>b?0:b>f.pagesY.length-1?f.pagesY.length-1:b,f.currPageX=a,f.currPageY=b,d=f.pagesX[a],e=f.pagesY[b]):(d=-f.wrapperW*a,e=-f.wrapperH*b,d<f.maxScrollX&&(d=f.maxScrollX),e<f.maxScrollY&&(e=f.maxScrollY)),f.scrollTo(d,e,c)},disable:function(){this.stop(),this._resetPos(0),this.enabled=!1,this._unbind(w),this._unbind(x),this._unbind(y)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind(A):C(this.aniTime),this.steps=[],this.moved=!1,this.animating=!1},zoom:function(a,b,c,d){var e=this,f=c/e.scale;e.options.useTransform&&(e.zoomed=!0,d=void 0===d?200:d,a=a-e.wrapperOffsetLeft-e.x,b=b-e.wrapperOffsetTop-e.y,e.x=a-a*f+e.x,e.y=b-b*f+e.y,e.scale=c,e.refresh(),e.x=e.x>0?0:e.x<e.maxScrollX?e.maxScrollX:e.x,e.y=e.y>e.minScrollY?e.minScrollY:e.y<e.maxScrollY?e.maxScrollY:e.y,e.scroller.style[j]=d+"ms",e.scroller.style[h]="translate("+e.x+"px,"+e.y+"px) scale("+c+")"+D,e.zoomed=!1)},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}},e=null,"undefined"!=typeof exports?exports.iScroll=E:a.iScroll=E}(this,document),svp.define("WeixinApi",function(a,b,c){var d=(svp.$,a("base.vars")),e="undefined"==typeof e?{}:e,f=function(){for(var a=document.getElementsByTagName("meta"),b={},c=0;c<a.length;c++){var d=a[c].getAttribute("name"),e=a[c].getAttribute("property"),f=a[c].getAttribute("content")||"";(null==d||void 0==d||0==d.length)&&(d=e),null!=d&&void 0!=d&&0!=d.length&&(b[d]=f)}return b};e.getVideoMetaData=window.getVideoMetaData=f;var g=f();e.dataForWeixin={},e.getData=function(){e.dataForWeixin={appId:"",MsgImg:g["og:image"]||"http://css.tv.itc.cn/global/images/nav1/logo.gif",TLImg:g["og:image"]||"http://css.tv.itc.cn/global/images/nav1/logo.gif",url:g["og:url"]||encodeURIComponent(window.location.href),imgWidth:g["og:imgWidth"]||"300",imgHeight:g["og:imgHeight"]||"300",title:g["og:title"]||document.getElementsByTagName("title")[0].text.split(" ")[0]||"",desc:g.description||document.getElementsByTagName("title")[0].text.split(" ")[0]||"",type:g["og:type"]||"",callback:function(){}}},console.log(e.dataForWeixin);var h=function(){if("undefined"!=typeof WeixinJSBridge){var a=e.dataForWeixin;if("undefined"!=typeof a){var b=a.title.substr(0,22);if(b.indexOf("搜狐视频")>-1||(b+="-搜狐视频",a.title=b),d.IsWeixinBrowser)try{var c=a.url;c=c.replace(/http:\/\/tv\.sohu\.com/i,"http://wx.m.tv.sohu.com"),c=c.replace(/http:\/\/my\.tv\.sohu\.com/i,"http://wx.m.tv.sohu.com"),a.url=c}catch(f){}WeixinJSBridge.on("menu:share:appmessage",function(){WeixinJSBridge.invoke("sendAppMessage",{appid:a.appId,img_url:a.MsgImg,img_width:a.imgWidth,img_height:a.imgHeight,link:a.url,desc:a.desc,title:a.title},function(b){"send_app_msg:ok"==b.err_msg&&console.log(b.err_msg),a.callback()})}),WeixinJSBridge.on("menu:share:timeline",function(){a.callback(),WeixinJSBridge.invoke("shareTimeline",{img_url:a.TLImg,img_width:a.imgWidth,img_height:a.imgHeight,link:a.url,desc:a.desc,title:a.title},function(a){"share_timeline:ok"==a.err_msg&&console.log(a.err_msg)})}),WeixinJSBridge.on("menu:general:share",function(b){var c="#分享视频#"+a.title;d.IsIOS&&(c+=a.url,a.desc=a.desc.substr(0,29)),b.generalShare({type:a.type,content:c,title:a.title,desc:a.desc,img_url:a.TLImg,img_width:a.imgWidth,img_height:a.imgHeight,link:a.url,data_url:a.url},function(a){WeixinJSBridge.log(a.err_msg)})})}}};e.init=function(){d.IsWeixinBrowser&&("undefined"!=typeof WeixinJSBridge?h():setTimeout(e.init,300))},e.getData(),e.init(),c.exports={getData:e.getData,init:e.init}}),svp.define("base.store",function(a,b,c){"use strict";var d,e={},f=window,g=document,h="localStorage",i="script";try{d=f[h]}catch(j){}var k=function(){};e.disabled=!1,e.set=k,e.get=k,e.remove=k,e.clear=k,e.transact=function(a,b,c){var d=e.get(a);null===c&&(c=b,b=null),"undefined"==typeof d&&(d=b||{}),c(d),e.set(a,d)},e.getAll=function(){},e.forEach=function(){},e.serialize=function(a){return JSON.stringify(a)},e.deserialize=function(a){if("string"!=typeof a)return void 0;try{return JSON.parse(a)}catch(b){return a||void 0}};var l=function(){try{return h in f&&f[h]}catch(a){return!1}};if(l())d=f[h],e.set=function(a,b){return void 0===b?e.remove(a):(d.setItem(a,e.serialize(b)),b)},e.get=function(a){return e.deserialize(d.getItem(a))},e.remove=function(a){d.removeItem(a)},e.clearAll=function(){d.clear()},e.forEach=function(a){for(var b=0;b<d.length;b++){var c=d.key(b);a(c,e.get(c))}};else if(g.documentElement.addBehavior){var m,n;try{n=new ActiveXObject("htmlfile"),n.open();var o="<"+i+">document.w=window</"+i+">";o+='<iframe src="/favicon.ico"></iframe>',n.write(o),n.close(),m=n.w.frames[0].document,d=m.createElement("div")}catch(j){d=g.createElement("div"),m=g.body}var p=function(a){var b=function(){var b=Array.prototype.slice.call(arguments,0);b.unshift(d),m.appendChild(d),d.addBehavior("#default#userData"),d.load(h);var c=a.apply(e,b);return m.removeChild(d),c};return b},q=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g"),r=function(a){return a.replace(/^d/,"___$&").replace(q,"___")};e.set=p(function(a,b,c){return b=r(b),void 0===c?e.remove(b):(a.setAttribute(b,e.serialize(c)),a.save(h),c)}),e.get=p(function(a,b){return b=r(b),e.deserialize(a.getAttribute(b))}),e.remove=p(function(a,b){b=r(b),a.removeAttribute(b),a.save(h)}),e.clear=p(function(a){var b=a.XMLDocument.documentElement.attributes;a.load(h);for(var c=0,d=b.length;d>c;c++){var e=b[c];a.removeAttribute(e.name)}a.save(h)}),e.forEach=p(function(a,b){for(var c=a.XMLDocument.documentElement.attributes,d=0,f=c.length;f>d;d++){var g=c[d];b(g.name,e.deserialize(a.getAttribute(g.name)))}})}e.getAll=function(){var a={};return e.forEach(function(b,c){a[b]=c}),a};try{var s="__storejs__";e.set(s,s),e.get(s)!==s&&(e.disabled=!0),e.remove(s)}catch(j){e.disabled=!0}e.enabled=!e.disabled,e.getStorage=function(){try{d=f[h]}catch(a){console.log("localStorage is not supported")}return d},e.clear=function(a){var b=e.getStorage();if(b)if(a)for(var c in b)0===c.indexOf(a)&&b.removeItem(c);else b.clear()},window.Store=e,c.exports=e});var __modulesMap={Zepto:{path:"http://m.tv.sohu.com/mb/dist/js/zepto-v1.1.3.min.js"},PassportSC:{path:"http://tv.sohu.com/upload/touch/js/PassportSC.min.20150214.js"}};if("undefined"!=typeof window.loader)for(var m in __modulesMap)loader.add(m,__modulesMap[m]);svp.define("base.passport",function(a,b,c){"use strict";var d=a("base.util"),e=a("base.cookie"),f=a("base.codec"),g="http://tv.sohu.com/upload/touch/js/PassportSC.min.20150214.js",h=function(){var a,b={},c=function(){var a,b,c,d=["ppinf","ppinfo","passport"];for(a=0,b=d.length;b>a;a++)if(c=new RegExp("\\b"+d[a]+"\\b=(.*?)(?:$|;)").exec(document.cookie),c&&c.length){c=c[1];break}return c},h=function(a){var b="";try{a=unescape(a).split("|"),("1"===a[0]||"2"===a[0])&&(b=f.utf8to16(f.base64decode(a[3])))}catch(c){}return b},i=function(a){var b,c,d,e={};for(a=(a||"").split("|"),b=0,c=a.length;c>b;b++)d=a[b].split(":"),d.length>1&&(e[d[0]]=d[2]);return e},j=function(){var d=c(),e=b;return a!==d&&(a=d,e=i(h(d)),b=e),e},k=function(a){a=a||g,"undefined"==typeof PassportSC&&d.loadScript(a)};return{initPassport:k,getPassportCookie:c,decodeData:h,getKeyValueData:i,getData:j,getPassport:function(){return j().userid||""},getUid:function(){return j().uid||""},getUUID:function(){return j().uuid||e.get("SUV")||""},getQname:function(){return j().uniqname||""}}}();window.Passport=h,c.exports=h}),svp.define("base.slide",function(a,b,c){"use strict";var d={slideClass:"",videoListsClass:"svp_video_list",pagePoint:"svp_page_point",showLocationClass:"c",showClass:"svp_focusShow",itemClass:"svp_video_list",moveSpeed:200,minMoveDist:20,moveFlag:!0,isLock:!1,isHasPoint:!1,startX:0,startY:0,moveX:0,isMobile:!0,listTranslate:0,pcDragFlag:!1,loop:!1,firstClone:"clone_first",lastClone:"clone_last",autoSpeedInterval:3e3,auto:!1,aLinkClass:"svp_link",init:function(a){var b=d;b.paramInit(a)&&(b.modelInit(),b.initPagePoint(),b.eventInit())},paramInit:function(a){return a?(this.slideClass=a&&a.scrollClass||"svp_recommend_videos",this.$slideWrap=$("."+this.slideClass),this.loop=a.loop||!1,this.auto=a.auto||!1,this.moveSpeed=a.moveSpeed||200,this.autoSpeedInterval=a.autoSpeedInterval||this.autoSpeedInterval):this.slideClass="svp_recommend_videos",0===$("."+this.slideClass).length?!1:!0},modelInit:function(){this.isMobile="createTouch"in document},getItemWidth:function(){return $("."+this.slideClass).width()},isPagePoint:function(){var a=$("."+this.pagePoint);return a.length>0},initPagePoint:function(){var a=$("."+this.itemClass);a.removeClass(this.showClass),a.first().addClass(this.showClass),this.isPagePoint()&&(this.isHasPoint=!0,$("."+this.pagePoint).removeClass(this.showLocationClass).first().find("li:first").addClass(this.showLocationClass)),this.loop&&this.cloneDom()},cloneDom:function(){if(this.loop){var a=$("."+this.itemClass).first().clone().addClass(this.firstClone),b=$("."+this.itemClass).last().clone().addClass(this.lastClone);this.$slideWrap.prepend(b),this.$slideWrap.append(a.removeClass(this.showClass)),this.$slideWrap.css("-webkit-transform","translateX(-"+this.getItemWidth()+"px)")}},eventInit:function(){var a,b,c,d=this;a=this.isMobile?"touchstart":"mousedown",b=this.isMobile?"touchmove":"mousemove",c=this.isMobile?"touchend":"mouseleave click",this.$slideWrap.on(a,function(a){d.isLock||d.touchStart(a)}),this.$slideWrap.on(b,function(a){d.isLock||d.touchMove(a)}),this.$slideWrap.on(c,function(a){return d.touchEnd(a),!1}),this.auto&&this.autoScroll()},moveByIndex:function(a,b){var c=this,d=-1*a*this.getItemWidth();b=b||function(){},$("."+this.slideClass).animate({"-webkit-transform":"translateX("+d+"px)"},c.moveSpeed,b)},scrollMove:function(a){var b=this;if(!this.isLock){var c=$("."+this.showClass),d=$("."+this.pagePoint).find("li"),e=$("."+b.itemClass),f="prev"===a?c.prev():c.next(),g=f.index();if(this.isLock=!0,this.moveFlag)if(this.loop){var h,i,j;c.removeClass(this.showClass),f.hasClass(b.firstClone)||f.hasClass(b.lastClone)?("next"===a?(h=1,j=0,i=-1*b.getItemWidth()+"px"):(h=e.length-2,j=d.length-1,i=-1*b.getItemWidth()*h+"px"),this.moveByIndex(g,function(){e.eq(h).addClass(b.showClass),b.changePoint(j),b.$slideWrap.css("-webkit-transform","translateX("+i+")"),b.isLock=!1})):this.moveByIndex(g,function(){f.addClass(b.showClass),b.changePoint(g-1),b.isLock=!1})}else 0===f.length?this.moveByIndex(c.index(),function(){b.isLock=!1}):(c.removeClass(this.showClass),this.moveByIndex(g,function(){f.addClass(b.showClass),b.isLock=!1,b.changePoint(g)}));else this.moveByIndex(c.index(),function(){b.isLock=!1})}},changePoint:function(a){this.isHasPoint&&($("."+this.pagePoint).find("li").removeClass(this.showLocationClass),$("."+this.pagePoint).find("li").eq(a).addClass(this.showLocationClass))},autoScroll:function(){var a=this;clearInterval(this.timer),this.timer=setInterval(function(){a.scrollMove("next")},this.autoSpeedInterval)},touchStart:function(a){this.auto&&clearInterval(this.timer),this.startX=this.isMobile?a.touches[0].pageX:a.clientX,this.startY=this.isMobile?a.touches[0].pageY:a.clientY,this.listTranslate=$("."+this.slideClass).offset().left,this.isMobile||(this.pcDragFlag=!0)},touchMove:function(a){if(this.isMobile||this.pcDragFlag){var b,c,d=this.isMobile?a.touches[0].pageX:a.clientX,e=this.isMobile?a.touches[0].pageY:a.clientY;if(b=d>this.startX?d-this.startX:this.startX-d,c=e>this.startY?e-this.startY:this.startY-e,this.moveX=d,b>c){a.preventDefault(),a.stopPropagation();var f=this.listTranslate+(d-this.startX);$("."+this.slideClass).css("-webkit-transform","translateX("+f+"px)")}}},touchEnd:function(a){if(!this.isMobile){if(this.moveX=a.clientX,!this.pcDragFlag)return;this.pcDragFlag=!1}return this.isMobile&&0===this.moveX||!this.isMobile&&this.startX===this.moveX?void(("A"===a.target.nodeName||$(a.target).parent().hasClass(this.aLinkClass))&&(window.location.href=a.target.href||$(a.target).parent().attr("href"))):(Math.abs(this.moveX-this.startX)<this.minMoveDist&&(this.moveFlag=!1),this.scrollMove(this.moveX>this.startX?"prev":"next"),this.moveFlag=!0,this.moveX=0,void(this.auto&&this.autoScroll()))}};c.exports={Scroll:d.init}}),svp.define("base.special",function(a,b,c){"use strict";var d=a("base.vars"),e=a("base.url"),f=svp.$,g={};g.COOPERATOR_LIST=[/XiaoMi\/MiPad/i],g.CONTINUE_PLAY_REFRESH_LIST=[],g.FORBID_AUTOPLAY_LIST=[/Windows Phone/i,/iphone/i],g.WX_FORBID_AUTOPLAY_LIST=[/MI[\s\-_]+/i,/SM\-N90/i,/HUAWEI/i,/Coolpad/i,/E7/i,/GT\-I95/i,/GT\-N71/i,/M032.*JRO03H/i,/Android\/?\s?4\.0/i],g.TIMEUPDATE_REPLACE_ENDED_LIST=[/SM\-N90/i],g.FORCE_USE_DOWNLOADURL_LIST=[/M032.*JRO03H/i],g.FORCE_USE_M3U8_LIST=[],g.PLID_LIST=[],g.ADV_BLACK_LIST=[/M032.*JRO03H/i,/Android\/?\s?2\../i,/Android\/?\s?4\.0.*X907.*QQBrowser/i,/QQBrowser\/4\.2/i,/HTC8088_TD/i],g.SERVICE_BLACK_LIST={ios:[],android:[],winPhone:[]},g.FULL_SCREEN_LIST=[/XiaoMi\/MiPad/i],g.M3U8_BLACK_LIST={ios:[],android:[/HM\sNOTE/i,/Build\/HM.*XiaoMi\/MiuiBrowser/i,/vivo/i,/ZTE/i,/TCL/i,/Coolpad/i,/M032.*JRO03H/i,/MQQBrowser(\/4\.|\s4\.)+/i],winPhone:[]},g.MP4_BLACK_LIST={ios:[],android:[],winPhone:[]},g.VIDEO_DOWNLOAD_SRC_LIST=["1000","1102"],g.VIDEO_M3U8_SRC_LIST=["1080","1128"],g.AD_FILTER_SRC_LIST=["1000","1080"],g.FEE_DATA_TYPE_LIST=["257","258"];var h=function(a,b){var c=!1;return!f.isUndefined(a)&&f.isArray(b[a])&&f.each(b[a],function(a,b){return b.test(d.UA)?d.IsQQBrowser&&-1===b.toString().indexOf("QQBrowser")?(c=!1,!1):(c=!0,!1):void 0}),c},i=function(){var a=e.getQueryString("src")||e.getQueryString("SRC")||"";return""!==a&&a.length>=4&&(a=a.substr(0,4)),a};g.isRefreshWhenContinuePlay=function(){var a=!1;return f.each(g.CONTINUE_PLAY_REFRESH_LIST,function(b,c){return c.test(d.UA)?(a=!0,!1):void 0}),a},g.isInBlackList=function(a){var b="",c=!1;return d.IsIPhone||d.IsIPad?b="ios":d.IsAndroid?b="android":d.IsWindowsPhone&&(b="winPhone"),"m3u8"===a&&(h(b,g.SERVICE_BLACK_LIST)||h(b,g.M3U8_BLACK_LIST))?c=!0:"mp4"===a&&(h(b,g.SERVICE_BLACK_LIST)||h(b,g.MP4_BLACK_LIST))&&(c=!0),c},g.isForceUseM3u8=function(){var a=!1,b=i();return f(g.VIDEO_M3U8_SRC_LIST).indexOf(b)>=0&&(a=!0),a||f.each(g.FORCE_USE_M3U8_LIST,function(b,c){return c.test(d.UA)?(a=!0,!1):void 0}),a},g.isForceUseDownloadUrl=function(){var a=!1,b=i();return f(g.VIDEO_DOWNLOAD_SRC_LIST).indexOf(b)>=0&&(a=!0),a||f.each(g.FORCE_USE_DOWNLOADURL_LIST,function(b,c){return c.test(d.UA)?(a=!0,!1):void 0}),a},g.isCooperator=function(){var a=!1;return f.each(g.COOPERATOR_LIST,function(b,c){return c.test(d.UA)?(a=!0,!1):void 0}),a},g.cooperatorProcess=function(a){var b=e.getQueryString("src")||e.getQueryString("SRC")||"";""!==b&&b.length>=4&&(b=b.substr(0,4),f(g.VIDEO_DOWNLOAD_SRC_LIST).indexOf(b)>=0&&a.urls.downloadUrl.length>0&&(a.urls.mp4={},a.urls.mp4.nor=a.urls.downloadUrl))},g.isFullScreen=function(){var a=!1;f.each(g.FULL_SCREEN_LIST,function(b,c){return c.test(d.UA)?(a=!0,!1):void 0});var b=e.getQueryString("player")||e.getQueryString("PLAYER")||"";return"1"===b&&(a=!0),a},g.advFilter=function(){var a=!1,b=e.getQueryString("src")||e.getQueryString("SRC")||"";return b&&b.indexOf("|")>-1&&(b=b.split("|")[0]),f.each(g.AD_FILTER_SRC_LIST,function(c,d){return b===d?(a=!0,!1):void 0}),a},g.isForbidAutoplay=function(){var a=!1;return f.each(g.FORBID_AUTOPLAY_LIST,function(b,c){return c.test(d.UA)?(a=!0,!1):void 0}),d.IsWeixinBrowser&&f.each(g.WX_FORBID_AUTOPLAY_LIST,function(b,c){return c.test(d.UA)?(a=!0,!1):void 0}),d.IsAndroidPad&&(a=!0),a},g.isAllowPlayAdv=function(){var a=!0;return f.each(g.ADV_BLACK_LIST,function(b,c){return c.test(d.UA)?(a=!1,!1):void 0}),g.advFilter()?!1:a},g.isAllowTimeupdateReplaceEnded=function(){var a=!1;return f.each(g.TIMEUPDATE_REPLACE_ENDED_LIST,function(b,c){return c.test(d.UA)?(a=!0,!1):void 0}),a},c.exports=g}),svp.define("base.support",function(a,b,c){"use strict";var d=svp.$,e=a("base.vars"),f=a("base.url"),g=a("base.special"),h={isUseHtml5:function(a){var b=null;if(/ipad|ipod|iphone|lepad_hls|IEMobile/gi.test(e.UA))return!0;if(e.IsAndroid){if(h.isSupportMP4(a))return!0;if(e.IsQQBrowser&&e.BrowserVersion>=4.2)return!0;if(-1!==e.UA.indexOf("MI-ONE")||-1!==e.UA.indexOf("MI2"))return!0;if(e.OsVersion>="4"&&(b=e.UA.match(/MicroMessenger\/((\d+)\.(\d+))\.(\d+)/))&&b[1]>=4.2)return!0;if(e.OsVersion>="4.1")return!0}return h.isSupportMP4(a)||h.isSupportM3u8(a)?!0:e.IsIEBrowser&&e.IsWindows&&e.BrowserVersion>=9?!0:!1},isLiveUseHTML5:function(){return e.IsIOS?!0:e.IsAndroid&&e.IsQQBrowser&&e.BrowserVersion>=4.2?!0:!1},isUseFlash:function(){return e.IsIEBrowser&&e.IsWindows?!0:!1},isSupportM3u8:function(){if(g.isInBlackList("m3u8"))return!1;if(e.IsIphone||e.IsIpad||"m3u8"===f.getQueryString("srcType"))return!0;var a=document.getElementsByTagName("video")[0]||document.createElement("video");if("function"==typeof a.canPlayType){var b=a.canPlayType("application/x-mpegURL");if(e.IsAndroid&&(e.IsBaiduBrowser||e.IsBaiduBoxApp||e.IsQQBrowser||e.IsNewUCBrowser))return!0;if(e.IsAndroid&&!e.IsXiaoMI)return!1;if("probably"===b)return!0;if("maybe"===b)return!1}return!1},isSupportWebm:function(){if(e.IsAndroid&&e.OsVersion>="4.1")return!0;var a=document.getElementsByTagName("video")[0]||document.createElement("video");return"function"!=typeof a.canPlayType||"probably"!==a.canPlayType('video/webm; codecs="vp8.0, vorbis"')&&"probably"!==a.canPlayType('video/webm; codecs="vp9.0, vorbis"')?!1:!0},isSupportMP4:function(){if(g.isInBlackList("mp4"))return!1;if(e.IsWindowsPhone||"mp4"===f.getQueryString("srcType"))return!0;var a=document.getElementsByTagName("video")[0]||document.createElement("video");if("function"==typeof a.canPlayType){if(""===a.canPlayType('video/mp4; codecs="mp4v.20.8"'))return!1;if(""===a.canPlayType('video/mp4; codecs="avc1.42E01E"')||""===a.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"'))return!1}return!0},isSupportSVG:function(){return document.implementation&&d.isFunction(document.implementation.hasFeature)?document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"):!1}};c.exports=h}),svp.define("swipe",function(a,b,c){function d(a,b){this.scroller=null,this.nav=document.getElementById(a),this.navBox=document.getElementById(b),this.init()}var e=function(a){function b(a){try{return a.offsetParent?a.offsetLeft+b(a.offsetParent):a.offsetLeft}catch(c){return 0}}function c(a){try{return a.offsetParent?a.offsetTop+c(a.offsetParent):a.offsetTop}catch(b){return 0}}var d={x:0,y:0};if(a.getBoundingClientRect){var e=0,f=0;try{var g=a.getBoundingClientRect(),h=document.documentElement;e=g.left+Math.max(h.scrollLeft,document.body.scrollLeft)-h.clientLeft,f=g.top+Math.max(h.scrollTop,document.body.scrollTop)-h.clientTop}catch(i){}d.x=e,d.y=f}else d.x=b(a),d.y=c(a);return d},f=function(a,b,c){function d(a){var b=a.currentTarget,d=a.relatedTarget;e(b,d)||b==d||c.call(a.currentTarget,a)}function e(a,b){try{return a.contains?a!=b&&a.contains(b):!!(16&a.compareDocumentPosition(b))}catch(c){}}window.addEventListener?"mouseenter"==b||"mouseleave"==b?"mouseenter"==b?a.addEventListener("mouseover",d,!1):a.addEventListener("mouseout",d,!1):a.addEventListener(b,c,!1):window.attachEvent&&a.attachEvent("on"+b,c)},g=function(a,b){return a.currentStyle?a.currentStyle[b]:document.defaultView.getComputedStyle(a,!1)[b]};d.prototype={init:function(){this.nav&&this.bind()},bind:function(){var a=this;this.initScroller(),this.resetPostion();var b="onorientationchange"in window?"orientationchange":"resize";f(window,b,function(){if(a.scroller){var b=function(){for(var a=0,b=0;b<d.length;b++)a+=d[b].offsetWidth+parseInt(g(d[b],"marginRight"));return a},c=a.navBox.getElementsByTagName("ul")[0],d=c.getElementsByTagName("li");c.style.width=b()+"px",a.scroller.refresh()}})},resetPostion:function(){var a=this.navBox,b=this.findCurrent(),c=!0;if(b){var d=e(a).x,f=e(b).x,g=a.offsetWidth;(f>=d+g||f+b.offsetWidth>d+g)&&(c=!1)}if(!c){var h=b.offsetLeft+b.offsetWidth/2-a.offsetWidth/2;this.scroller.scrollTo(-h,0,0)}if(0>f){var i=e(this.nav.getElementsByTagName("ul")[0]).x;this.scroller.scrollTo(i+-f,0,0)}},findCurrent:function(){for(var a=this.navBox,b=a.getElementsByTagName("ul")[0],c=b.getElementsByTagName("li"),d=null,e=0;e<c.length;e++){var f=c[e];if(f&&f.className&&/active/i.test(f.className)){d=f;break}}return d},initScroller:function(){var a=this.navBox,b=a.getElementsByTagName("ul")[0],c=b.getElementsByTagName("li"),d=function(){for(var a=0,b=0;b<c.length;b++)a+=c[b].offsetWidth+parseInt(g(c[b],"marginRight"));return a};b.style.width=d()+2+"px",this.scroller=new iScroll(this.navBox.id,{bounce:!0,vScroll:!1,hScrollbar:!1,vScrollbar:!1})}},c.exports=d}),svp.define("base.swipe",function(a,b,c){var d=svp.$,e=a("base.vars"),f={startX:0,startPoint:[0,0],lastX:0,page:1,pageCount:1,scrollerWidth:0,windowWidth:0,initiated:!1,timer:null,events:{onTouchStart:e.START_EVENT,onTouchMove:e.MOVE_EVENT,onTouchEnd:e.END_EVENT},init:function(){f.initScroller(),d(document).on(f.events.onTouchEnd,f.onTouchEnd).on(f.events.onTouchMove,f.onTouchMove).on("touchcancel",f.onTouchCancel).on("click",f.onTouchCancel)},initScroller:function(a){a=a||document,d(".scroll_wrap",a).css({"-webkit-backface-visibility":"hidden",overflowX:"hidden","-webkit-transform":"translate3d(0,0,0)"}),d(".scroller",a).css({"-webkit-backface-visibility":"hidden","-webkit-transform":"translate3d(0,0,0)","-webkit-transition":"-webkit-transform 0"}),d(".scroller",a).on(f.events.onTouchStart,f.onTouchStart),d(".scroller",a).on("webkitTransitionEnd",function(){var a=d(this).attr("page")||1,b=d(".scroller_page b",this.parentNode);b.removeClass("c"),b.eq(a-1).addClass("c")})},scrollToElement:function(a,b,c){var d=a.parent();if(0!==d.length){var e=d.get(0),f=e.offsetLeft,g=e.offsetLeft,h=-(a.offset().left-f),i=e.lastElementChild,j=i.offsetLeft+i.offsetWidth+f+g,k=d.parent().width(),l=j-k,m=parseInt(d.attr("startX")||0);
m>h&&-h+a.width()<-m+k&&!c||(-l>h&&(h=-l),h>0&&(h=0),d.attr("startX",h).css({"-webkit-transform":"translate3d("+h+"px,0,0)","-webkit-transition-duration":b?"200ms":0}))}},onTouchStart:function(a){clearTimeout(f.timer),f.timer=null;var b=this,c=d(this),g=b.childElementCount;if(g>0){f.scrollerWidth=0,f.leftPadding=b.offsetLeft,f.rightPadding=b.offsetLeft;var h=b.lastElementChild;if(h&&(f.scrollerWidth=h.offsetLeft+h.offsetWidth+f.leftPadding+f.rightPadding),f.scrollerWidth<=b.parentNode.offsetWidth)return;f.touchElement=c,f.initiated=!0,c.css("-webkit-transition-duration","0"),f.startX=parseInt(c.attr("startX")||0,10),f.paginationElLeft=null,f.paginationElRight=null,f.windowWidth=c.parent().width();var i=b.firstElementChild;do{var j=d(i).get(0).offsetLeft;if(!f.paginationElLeft&&j+f.startX>=0&&(f.paginationElLeft=i),j+i.offsetWidth+f.startX>f.windowWidth){f.paginationElRight=i;break}}while(i=i.nextElementSibling);f.deltaXInsetBound=0,a.originalEvent&&(a=a.originalEvent);var k=e.IsTouch?a.changedTouches[0]:a;f.startPoint=[k.clientX,k.clientY]}},onTouchMove:function(a){if(!1!==f.initiated){a.originalEvent&&(a=a.originalEvent);var b=e.IsTouch?a.changedTouches[0]:a,c=b.clientX-f.startPoint[0],d=b.clientY-f.startPoint[1];if(c>0&&f.startX>=0?f.lastX=f.startX+c/2:0>c&&-f.startX-c>=f.scrollerWidth-f.windowWidth?f.lastX=-(f.scrollerWidth-f.windowWidth)+(c-f.deltaXInsetBound)/2:(f.lastX=f.startX+c,f.deltaXInsetBound=c),!f.isSwiping&&Math.abs(d)>Math.abs(c))return void(f.initiated=!1);a.preventDefault(),f.isSwiping=!0,f.setPos(f.lastX)}},onTouchEnd:function(){if(f.isSwiping){var a=0,b=f.touchElement.attr("page")||1;if(f.lastX<f.startX){f.paginationElRight?(a=-1*f.paginationElRight.offsetLeft,b++):a=-1*f.paginationElLeft.offsetLeft;var c=f.scrollerWidth-f.windowWidth;-c>a&&(a=-c)}else if(f.lastX>f.startX&&f.paginationElLeft){var d=f.paginationElLeft,e=f.windowWidth-d.offsetWidth-d.offsetLeft;do if(a=-1*d.offsetLeft,a>e){b--;break}while(d=d.previousElementSibling)}f.touchElement.attr("page",b),a>0&&(a=0),f.touchElement.attr("startX",a),f.touchElement.css("-webkit-transition-duration","200ms"),f.setPos(a),f.onTouchCancel()}},onTouchCancel:function(){f.isSwiping=!1,f.initiated=!1,f.timer=setTimeout(function(){f.touchElement&&f.touchElement.find("a").off("click",f.cancelClick),f.touchElement=null,f.timer=null},200)},cancelClick:function(){return!1},setPos:function(a){f.touchElement.css("-webkit-transform","translate3d("+a+"px,0,0)"),f.touchElement.find("a").on("click",f.cancelClick)}};d(document).ready(function(){f.init(),d(window).on("resize",function(){d.each(d(".scroller"),function(a,b){var c=b.getAttribute("page")||1;f.scrollToElement(d(b).children().eq(c-1))})})}),e.IsTouch||"undefined"!=typeof window.jQuery||d(document).on("mousedown",function(a){for(var b=a.target;b;){var c=b.nodeName+"";if(c=c.toLowerCase(),"a"==c||"img"==c){a.preventDefault();break}b=b.parentNode}},!1),window.Swipe=f,c.exports=f}),svp.define("base.sysMessage",function(a,b,c){"use strict";var d=svp.$,e=a("base.vars"),f=a("data.appDownload"),g=a("trace.click"),h=function(){var a='<div class="app_download_select js_download_select" style="display: none;"><div class="app_download_top"><span class="app_download_icon"></span><span class="app_download_close js_app_download_close"></span></div><div class="app_download_title js_download_select_title"></div><div class="app_download js_app_download" position="appdownload_floor">立即安装</div></div><div class="download_masklayer js_download_masklayer" style="display: none;"></div>';return a},i={},j=null;i.downloadPopTips=function(a){var b=d(".js_download_select"),c=d(".js_download_masklayer");(e.IsQQBrowser||e.IsUCBrowser||e.IsAndroid&&e.IsNewBaiduBrowser)&&(d("video").length>0&&d("video")[0].pause(),d("video").hide()),j=d.isUndefined(a.downUrl)||""===a.downUrl?null:{downUrl:a.downUrl},0===b.length&&(d("body").append(h()),b=d(".js_download_select"),c=d(".js_download_masklayer"),d(".js_app_download").on("click",function(){var e=d(this).attr("position");return console.log("发送行为统计点: "+e),g.pingback(null,e),f.gotoDownload(j),b.oriHide(),c.oriHide(),"undefined"!=typeof a&&"function"==typeof a.downloadCB&&a.downloadCB(),!1}),d(".js_app_download_close").on("click",function(){return b.oriHide(),c.oriHide(),(e.IsQQBrowser||e.IsUCBrowser||e.IsAndroid&&e.IsNewBaiduBrowser)&&setTimeout(function(){d("video").show()},300),"undefined"!=typeof a&&"function"==typeof a.closeCB&&a.closeCB(),!1}));var i=a&&a.title?a.title:"高速观看需安装搜狐视频客户端";d(".js_download_select_title",b).html(i),c.oriShow(),b.oriShow()},c.exports=i}),svp.define("base.url",function(a,b,c){"use strict";var d=svp.$,e=a("base.vars"),f={URLGlobalParms:{},getQueryData:function(a){a=a.replace(/^\?+/,"").replace(/&amp;/,"&");for(var b,c=a.split("&"),d=0,e={};d<c.length;){if(b=c[d].split("="),b[0]){var f=b[1]||"";try{f=decodeURIComponent(f)}catch(g){f=unescape(f)}f="null"===f?null:f,e[decodeURIComponent(b[0])]=f}d++}return e},getQueryString:function(a,b){var c,d=b?f.getElSearchString(b):window.location.search.substring(1);return c=f.getQueryData(d),a in c?c[a]:null},getParam:function(a,b){var c,d;"undefined"==typeof b?(d=window.location.href,c=new RegExp("(^|&?)"+a+"=([^&]*)(&|$)","i")):(d=a,c=new RegExp("(^|&?)"+b+"=([^&]*)(&|$)","i"));var e=d.match(c);return null!==e?decodeURIComponent(e[2]):null},getElSearchString:function(a){a=d(a).get(0);var b=a.search||"";if(!b){var c=a.getAttribute("FORM"===a.nodeName?"action":"href"),e=c.indexOf("?");-1!==e&&(b=c.slice(e))}return b},setQueryString:function(a,b){a=d(a);var c,e,g,h,i,j,k=a.get(0),l=k.search,m=l||"";if(!l){if(e=k.nodeName,"FORM"===e){if("post"!==k.method.toLowerCase()){for(c in b){h=b[c];var n=d('input[name="'+c+'"]',a);n?n.val(h):a.append(d('<input type="hidden" name="'+c+'" value="'+h+'" />'))}return}g=a.attr("action")||location.href+""}else g=a.attr("href")||location.href+"";i=g.indexOf("?"),j=g.indexOf("#"),-1===j&&(j=g.length),0>i||i>j?(m="",i=j):m=g.slice(i+1,j)}var o=f.getQueryData(m),p=[];for(c in b)o[c]=b[c];for(c in o)h=o[c],p.push(c+(h?"="+encodeURIComponent(h):""));if(!(p.length<1)){var q="?"+p.join("&");if(l)k.search=q;else{var r="FORM"===e?"action":"href";a.attr(r,g.slice(0,i)+q+g.slice(j))}return q}},objToQueryString:function(a){var b,c,d=[];for(b in a){c=a[b];var e=Object.prototype.toString.call(c);d.push("[object Array]"===e?b+"="+JSON.stringify(c):"[object Object]"===e?b+"="+JSON.stringify(c):b+"="+encodeURIComponent("undefined"==typeof c?"":c))}return d.join("&")},updateGlobalParms:function(a,b){var c=d("a[href],form",a),e=c.length,g=null,h="";for(b=b||f.URLGlobalParms;e--;)g=c.get(e),h=g.href,h&&h.match(/^(sms|tel|mail)/i)||f.setQueryString(g,b)},setParam:function(a,b,c){try{if("undefined"!=typeof a&&"undefined"!=typeof b&&"undefined"!=typeof c)if(-1===a.indexOf("?"))a+="?"+b+"="+c;else{var e=a.split("?"),f=e[1],g=f.split("&"),h=!1;d.each(g,function(a,d){var e=d.split("=");return b===e[0]?(h=!0,g[a]=b+"="+c,!1):void 0}),h?a=e[0]+"?"+g.join("&"):a+="&"+b+"="+c}}catch(i){console.log(i)}return a},setParams:function(a,b,c){if("string"==typeof b&&"undefined"!=typeof c)return this.setParam(a,b,c);if("object"==typeof b){for(var d in b)a=this.setParam(a,d,b[d]);return a}return a},_init:function(){var a,b=["clientType","clientVer","actionVer","plat","startClient","useVideoLink","r","player"],c=f.getQueryData(location.search.substring(1)),d={},g=0;e.IS_EXTERNAL_PLAYER&&b.push("channeled");for(var h=b.length;h--;)a=b[h],c.hasOwnProperty(a)&&(d[a]=c[a],g++);return f.URLGlobalParms=d,g>0&&f.updateGlobalParms(document,d),f.URLGlobalParms}};f._init(),c.exports=f}),svp.define("base.util",function(require,exports,module){"use strict";var vars=require("base.vars"),$=svp.$,Util={pingback:function(a,b){if(a)for(var c=a.split("|"),d=0,e=c.length;e>d;d++)(new Image).src=c[d],vars.ENABLE_DEBUG&&void 0!==b&&(vars.ADPingbackCount++,console.log("第"+vars.ADPingbackCount+"个上报,第"+b+"秒:",c[d]))},getOSVersion:function(){var a="0";if(vars.IsIOS){var b=vars.UA.match(/os ([0-9_]+)/i);b&&b[1]&&(a=Util.getVersionNumber(b[1]))}else a=vars.IsAndroid?Util.getAndroidVersionNumber():"4.0.1";return a},getAndroidVersionNumber:function(){var a=vars.UA.match(/android(.*?);/i)||[];return a[1]||"0"},getVersionNumber:function(a){var b=0;try{var c=a.replace(/_/g,".").replace(/^([0-9]+\.[0-9]+)[0-9\.]*/,"$1");b=parseFloat(c||0)}catch(d){}return b},timeFromNow:function(a){var b=a;try{var c=60,d=60*c,e=24*d,f=30*e,g=12*f;a=(+new Date-parseInt(a,10))/1e3,b=a>=g?Math.floor(a/g)+"年前":a>=f?Math.floor(a/f)+"个月前":a>=e?Math.floor(a/e)+"天前":a>=d?Math.floor(a/d)+"小时前":a>=c?Math.floor(a/c)+"分钟前":"刚刚"}catch(h){}return b},formatDateTime:function(a,b){var c="";try{a=a||new Date,b=b||new Date;{var d=a.getMonth()+1,e=a.getDate(),f=b.getTime()-a.getTime(),g=Math.floor(f/864e5),h=f%864e5,i=Math.floor(h/36e5),j=h%36e5,k=Math.floor(j/6e4),l=j%6e4;Math.round(l/1e3)}if(d.toString().length<2&&(d="0"+d),e.toString().length<2&&(e="0"+e),g>7)return a.getFullYear()+"-"+d+"-"+e;if(g>=2&&7>=g){var m=a.getDay()||1,n="星期一";switch(m){case 0:n="星期日";break;case 1:n="星期一";break;case 2:n="星期二";break;case 3:n="星期三";break;case 4:n="星期四";break;case 5:n="星期五";break;case 6:n="星期六"}c=n}else c=g>=1&&2>g?"昨天":24>i&&i>=1?i+"小时前":1>i&&k>=5?k+"分钟前":"刚刚";return c}catch(o){}},secondsToTime:function(a){var b=a;try{var c=parseInt(a,10);isNaN(c)&&(c=0);var d=Math.floor(c/60);if(a=c%60,10>a&&(a="0"+a),60>d)10>d&&(d="0"+d),b=d+":"+a;else{var e=Math.floor(d/60);d%=60,10>d&&(d="0"+d),10>e&&(e="0"+e),b=e+":"+d+":"+a}}catch(f){}return b},secondsToTimeText:function(a){var b=a;try{var c=parseInt(a,10);isNaN(c)&&(c=0);var d=Math.floor(c/60);if(a=c%60+"秒",60>d)b=(d>0?d+"分":"")+a;else{var e=Math.floor(d/60);d%=60,b=(e>0?e+"小时":"")+d+"分"+a}}catch(f){}return b},shortCount:function(a){var b=a;try{a=parseInt(a,10),a>1e8?a=Math.floor(a/1e8)+"亿":a>1e4&&(a=Math.floor(a/1e4)+"万"),b=a}catch(c){}return b},shortFixedCount:function(a){var b=a;try{a=parseFloat(a),a&&a>=1e8?a=(a/1e8).toFixed(1)+"亿":a&&a>=1e4&&(a=(a/1e4).toFixed(1)+"万"),b=a}catch(c){}return b},dateString:function(a){var b=a.match(/([0-9]{4}\-[0-9]+\-[0-9]+)/);return b&&(a=b[1]),a},setLoad:function(a){return a=$(a),a.hasClass("_load_inited")||a.addClass("_load_inited").append($('<i class="ui_loading"><u></u><u></u><u></u></i>')),a},loadScript:function(a,b,c){var d=document.getElementsByTagName("head")[0]||document.body,e=document.createElement("script"),f=!1;e.src=a,e.onload=e.onreadystatechange=function(){f||this.readyState&&"loading"===this.readyState||(f=!0,b&&b.apply(null,c||[]),e.onload=e.onreadystatechange=null,d.removeChild(e))},d.appendChild(e)},formatURL:function(a){return a+="",a=a.replace(/^https?:\/\/(my\.|v\.)?tv\./i,"http://m.tv.").replace("http://s.","http://m.s.").replace("http://m.s.","http://m.tv.").replace(/^http:\/\/(video\.)?2012/i,"http://m.s")},makePlayUrl:function(a,b){var c="";return c=/^(t\.)*m\.tv\.sohu\.com/.test(location.host)?"http://"+location.host:"http://m.tv.sohu.com",a.vid&&(a.site=a.site||1,c+=1===a.site?"/v":"/u/vw/",c+=a.vid+".shtml",b&&(c+="?channeled="+b)),c},getPageOffset:function(){return window.pageYOffset||document.body&&document.body.scrollTop||0},getSohuDefaultApplink:function(a){if(a&&"string"==typeof a)return a;var b="http://m.tv.sohu.com/app";return vars.IsAndroid&&(b=vars.IsAndroidPad?"http://upgrade.m.tv.sohu.com/channels/hdv/5.0.0/SohuTVPad_5.0.0_1369_201507271523.apk":"http://upgrade.m.tv.sohu.com/channels/hdv/5.0.0/SohuTV_5.0.0_680_201506111914.apk"),vars.IsIphone&&(b="https://itunes.apple.com/cn/app/sou-hu-shi-pin-gao-qing/id458587755?mt=8"),vars.IsIpad&&(b="https://itunes.apple.com/cn/app/sou-hu-shi-pin-hd/id414430589?mt=8"),vars.IsWindowsPhone&&(b="http://www.windowsphone.com/zh-CN/apps/403faf93-d22c-4331-ac32-9560ee9fac94"),vars.IsWindowsPad&&(b="http://apps.microsoft.com/windows/zh-CN/app/c5ae3c2a-5573-45c2-ac63-7d67e01de6bb"),vars.IsWeixinBrowser&&!vars.IsIphone&&(b="http://a.app.qq.com/o/simple.jsp?pkgname=com.sohu.sohuvideo&g_f=991881"),b},getConnectionType:function(){var a,b=window.navigator.connection,c="";return b&&(a=b.type,a===b.CELL_2G?c="2g":a===b.CELL_3G?c="3g":a===b.WIFI&&(c="wifi")),c},formatDateWithBar:function(a){a=a||new Date;var b=a.getMonth()+1,c=a.getDate();return b.toString().length<2&&(b="0"+b),c.toString().length<2&&(c="0"+c),a.getFullYear()+"-"+b+"-"+c},formatDateWithZh:function(a){a=a||new Date;var b=a.getMonth()+1,c=a.getDate();return b.toString().length<2&&(b="0"+b),c.toString().length<2&&(c="0"+c),a.getFullYear()+"年"+b+"月"+c+"日"},formatDateStr:function(a,b){var c={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};/(y+)/.test(b)&&(b=b.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(var d in c)new RegExp("("+d+")").test(b)&&(b=b.replace(RegExp.$1,1===RegExp.$1.length?c[d]:("00"+c[d]).substr((""+c[d]).length)));return b},getUserPt:function(){var a=1;if("undefined"!=typeof navigator.platform)for(var b=["Win32","Win64","Windows","Mac68K","MacPC","Macintosh","MacIntel"],c=0,d=b.length;d>c;c++)if(navigator.platform===b[c]){a=1;break}return vars.IsIpad&&(a=2),vars.IsIphone&&(a=3),vars.IsAndroid&&(a=5,/tv/i.test(vars.UA)&&(a=6)),vars.IsAndroidPad&&(a=4),vars.IsWindowsPad&&(a=7),vars.IsWindowsPhone&&(a=8),a},getUserPt2:function(){var a="pc";if("undefined"!=typeof navigator.platform)for(var b=["Win32","Win64","Windows","Mac68K","MacPC","Macintosh","MacIntel"],c=0,d=b.length;d>c;c++)if(navigator.platform===b[c]){a="pc";break}return vars.IsIpad&&(a="iPad"),vars.IsIphone&&(a="iPhone"),vars.IsAndroid&&(a="android"),vars.IsAndroidPad&&(a="androidPad"),vars.IsWindowsPad&&(a="windowsPad"),vars.IsWindowsPhone&&(a="windowsPhone"),a},getUserSysPt:function(){var a="pc";if("undefined"!=typeof navigator.platform)for(var b=["Win32","Win64","Windows","Mac68K","MacPC","Macintosh","MacIntel"],c=0,d=b.length;d>c;c++)if(navigator.platform===b[c]){a="pc";break}vars.IsAndroid&&(a="android"),vars.IsAndroidPad&&(a="android"),vars.IsIpad&&(a="ios"),vars.IsIphone&&(a="ios"),vars.IsWindowsPad&&(a="windows"),vars.IsWindowsPhone&&(a="windows")},reverse:function(a){return Array.isArray(a)?a.reverse():String(a).split("").reverse().join("")},getFnName:function(a){var b="";return"function"==typeof a&&(b=a.name||(/function ([^\(]+)/.exec(a.toString())||[])[1]||""),b},createUUIDPart:function(a){var b="";try{a="number"==typeof a&&a>0?a:16;for(var c=0;a>c;c++){var d=parseInt(256*Math.random(),10).toString(16);1===d.length&&(d="0"+d),b+=d}}catch(e){}return b},getRandomNum:function(a,b){var c=b-a,d=Math.random();return a+Math.round(d*c)},formatDateWithBar2:function(){var a=a||new Date,b=a.getMonth()+1,c=a.getDate();return b.toString().length<2&&(b="0"+b),c.toString().length<2&&(c="0"+c),a.getFullYear()+""+b+c},createUUID:function(){var a=Math.floor(window.screen.width),b=Math.floor(window.screen.height),c=Math.floor(Math.sqrt(a*a+b*b))||0,d=Math.round(this.getUserPt())||1,e=1e3*+new Date,f=e+d+c+Math.round(1e3*Math.random());return console.log("h5-uuid:",f),f},evalJSON:function(src){var obj={};try{/\\%/.test(src)&&(src=decodeURIComponent(src)),obj="object"==typeof JSON&&JSON.parse?eval("["+src+"]")[0]:eval("("+src+")")}catch(e){try{/\\%/.test(src)&&(src=decodeURIComponent(src)),obj=JSON.parse(src)}catch(b){console.log(b)}}return obj}};String.prototype.replaceAll=function(a,b){return this.replace(new RegExp(a,"gm"),b)},String.prototype.hasOwnProperty("trim")||(String.prototype.trim=function(){return this.replace(/^(\s|\r|\n|\r\n)*|(\s|\r|\n|\r\n)*$/g,"")}),Function.prototype.hasOwnProperty("bind")||(Function.prototype.bind=function(a){var b=this,c=arguments.length>1?Array.slice(arguments,1):null;return function(){return b.apply(a||this,c)}}),svp.$.getScript=svp.seajs.jsLoader,svp.$.getCss=svp.seajs.cssLoader,Util.loadScript=svp.seajs.jsLoader,Util.loadCss=svp.seajs.cssLoader,module.exports=Util}),svp.define("base.vars",function(a,b,c){"use strict";var d=svp.$,e={};window.SohutvJSBridge=window.SohutvJSBridge||{};var f=d.getUrlParam;e.__getQueryString=f,e.ENABLE_DEBUG=f("debug")||f("DEBUG")||!1,e.IS_HISTORY_SUPPORT="pushState"in history,e.IS_EXTERNAL_PLAYER=location.href.match(/player=1/i)||location.host.indexOf("m.sohu.com")>-1,e.API_KEY="f351515304020cad28c92f70f002261c",e.API_URL="http://api.tv.sohu.com/",e.SVP_URL="http://m.tv.sohu.com/",e.API_LIVE_URL="http://live.m.tv.sohu.com/api/",e.VSTAR_API_URL="http://api.tv.sohu.com/",e.VSTAR_PXY_URL="http://fans.tv.sohu.com/api/",e.VSTAR_PXY_TEST_URL="http://t.m.tv.sohu.com/pxy1/",e.API_PROXY_URL="http://m.tv.sohu.com/api/",e.IsAutoTrace=!0,e.VSTAR_MAIN_PATH="http://fans.tv.sohu.com/h5/vstar/",e.H5_URL="http://m.tv.sohu.com/",e.H5_TEST_URL="http://t.m.tv.sohu.com/",e.UA=window.navigator.userAgent;var g=function(){var a=1;try{a=void 0!==window.screen.systemXDPI&&void 0!==window.screen.logicalXDPI&&window.screen.systemXDPI>window.screen.logicalXDPI?window.screen.systemXDPI/window.screen.logicalXDPI:void 0!==window.devicePixelRatio?window.devicePixelRatio:window.devicePixelRatio,a=parseFloat(a)||1}catch(b){}return a};e.PixelRatio=g(),e.IsAndroid=!(!/Android|HTC|Adr/i.test(e.UA)&&!(window.navigator.platform+"").match(/Linux/i)),e.IsIpad=!e.IsAndroid&&/iPad/i.test(e.UA),e.IsIpod=!e.IsAndroid&&/iPod/i.test(e.UA),e.IsIphone=!e.IsAndroid&&/iPod|iPhone/i.test(e.UA),e.IsIOS=e.IsIpad||e.IsIphone,e.IsWindowsPhone=/Windows Phone/i.test(e.UA),e.IsOldWindowsPhone=/Windows\sPhone\s([1234567]\.|8\.0)/i.test(e.UA),e.IsNewWindowsPhone=e.IsWindowsPhone&&!e.IsOldWindowsPhone,e.IsWindowsPad=/Windows\sPad/i.test(e.UA),e.IsWindows=/Windows/i.test(e.UA),e.IsVivoPhone=/vivo/i.test(e.UA),e.ScreenSizeCorrect=1,e.IsAndroid&&(window.screen.width/window.innerWidth).toFixed(2)===e.PixelRatio.toFixed(2)&&(e.ScreenSizeCorrect=1/e.PixelRatio),e.AdrPadRegex=/pad|XiaoMi\/MiPad|lepad|YOGA|MediaPad|GT-P|SM-T|GT-N5100|sch-i800|HUAWEI\s?[MTS]\d+-\w+|Nexus\s7|Nexus\s8|Nexus\s11|Kindle Fire HD|Tablet|tab/i,e.ScreenSize=Math.floor(window.screen.width*e.ScreenSizeCorrect)+"x"+Math.floor(window.screen.height*e.ScreenSizeCorrect),e.gpadJSON={};var h=function(){var a=1,b=!1,c=e.ScreenSizeCorrect||1,d=Math.floor(window.screen.width*c),f=Math.floor(window.screen.height*c),g=1;try{a=parseFloat(Math.sqrt(d*d+f*f)),g=parseFloat(a/(160*e.PixelRatio))}catch(h){}if("ontouchstart"in window&&e.IsAndroid){var i=!!e.AdrPadRegex.test(e.UA);/mobile/i.test(e.UA)&&!i?b=!1:i?b=!0:!b&&(a>=2500||g>7)&&(b=!0)}return e.gpadJSON={width:d,height:f,PixelRatio:e.PixelRatio," padScreen":a,inch:g,isGpad:b,UA:e.UA},b};e.IsAndroidPad=h(),e.IsIEBrowser=!!document.all&&("Win32"===navigator.platform||"Win64"===navigator.platform||"Windows"===navigator.platform),e.IsSafariBrowser=!(!e.UA.match(/Safari/i)||e.IsAndroid),e.IsChromeBrowser=!(!e.UA.match(/Chrome/i)||e.IsAndroid),e.IsWeixinBrowser=!(!window.WeixinJSBridge&&!/MicroMessenger/i.test(e.UA)),e.WeiXinAppBoxURL="http://a.app.qq.com/o/simple.jsp?pkgname=com.sohu.sohuvideo",e.IsQQBrowser=!!/MQQBrowser/i.test(e.UA),e.IsUCBrowser=!!/UCBrowser/i.test(e.UA),e.IsOldUCBrowser=!!/UCBrowser\/([1-9]\..*|10\.[01].*)/i.test(e.UA),e.IsNewUCBrowser=e.IsUCBrowser&&!e.IsOldUCBrowser,e.IsSoGouBrowser=!!/SogouMobileBrowser/i.test(e.UA),e.IsMiBrowser=!!/MiuiBrowser/i.test(e.UA),e.IsBaiduBrowser=!!/baidubrowser/i.test(e.UA),e.IsBaiduBoxApp=!!/baiduboxapp/i.test(e.UA),e.IsOldBaiduBrowser=!!/baidubrowser\/([01234]\..*|5\.[0123456]\..*|5\.7\.[012])/i.test(e.UA),e.IsNewBaiduBrowser=e.IsBaiduBrowser&&!e.IsOldBaiduBrowser,e.IsTouch="ontouchstart"in window;var i=function(){var a=e.UA,b=a.match(/MQQBrowser\/(\d+\.\d+)/i),c=a.match(/QQ\/(\d+\.(\d+)\.(\d+)\.(\d+))/i),d=a.match(/MicroMessenger\/((\d+)\.(\d+))\.(\d+)/)||a.match(/MicroMessenger\/((\d+)\.(\d+))/),f=a.match(/MiuiBrowser\/(\d+\.\d+)/i),g=a.match(/UCBrowser\/(\d+\.\d+(\.\d+\.\d+)?)/)||a.match(/\sUC\s/),h=a.match(/IEMobile(\/|\s+)(\d+\.\d+)/),i=a.match(/(ipod\sOS)\s([\d_]+)/),j=0/0;return window.ActiveXObject?(j=6,(window.XMLHttpRequest||a.indexOf("MSIE 7.0")>-1)&&(j=7),(window.XDomainRequest||a.indexOf("Trident/4.0")>-1)&&(j=8),a.indexOf("Trident/5.0")>-1&&(j=9),a.indexOf("Trident/6.0")>-1&&(j=10)):a.indexOf("Trident/7.0")>-1&&(j=11),i&&(j=i[2].replace(/_/g,".")),b&&(j=b[1]),c&&(j=c[1]),d&&(j=d[1]),f&&(j=f[1]),g&&(j=g[1]||0/0),!b||window.mtt&&window.mtt.getBrowserParam||!e.IsAndroid||(j="9.6.0"),h&&(j=h[2]),j};e.BrowserVersion=i();var j=function(){var a=e.UA,b=0/0;if(d.os&&d.os.version)b=d.os.version;else{var c=a.match(/Web[kK]it[\/]{0,1}([\d.]+)/),f=a.match(/(Android);?[\s\/]+([\d.]+)?/),g=a.match(/(iPad).*OS\s([\d_]+)/),h=a.match(/(iPod)(.*OS\s([\d_]+))?/),i=!g&&a.match(/(iPhone\sOS)\s([\d_]+)/),j=a.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),k=a.match(/Kindle\/([\d.]+)/),l=a.match(/(BlackBerry).*Version\/([\d.]+)/),m=a.match(/(BB10).*Version\/([\d.]+)/),n=a.match(/(RIM\sTablet\sOS)\s([\d.]+)/);c&&(b=c[1]),f&&(b=f[2]),i&&!h&&(b=i[2].replace(/_/g,".")),g&&(b=g[2].replace(/_/g,".")),h&&(b=h[3]?h[3].replace(/_/g,"."):null),j&&(b=j[2]),l&&(b=l[2]),m&&(b=m[2]),n&&(b=n[2]),k&&(b=k[1])}return b};e.OsVersion=j(),e.IsMIOne=/MI-ONE/i.test(e.UA),e.IsXiaoMI=/MI/i.test(e.UA),e.IsVivoPhone=/vivo/i.test(e.UA),e.IsSonyPhone=/Sony/i.test(e.UA),e.IsSAMSUNG=/SAMSUNG/i.test(e.UA),e.IsSAMSUNGNote3=/SAMSUNG SM-N90/i.test(e.UA),e.START_EVENT=e.IsTouch?"touchstart":"mousedown",e.MOVE_EVENT=e.IsTouch?"touchmove":"mousemove",e.END_EVENT=e.IsTouch?"touchend":"mouseup",e.CANCEL_EVENT=e.IsTouch?"touchcancel":"mouseup",e.RESIZE_EVENT="onorientationchange"in window?"orientationchange":"resize",e.IsShouSou=location.host.indexOf("m.sohu.com")>-1,e.IS_EXTERNAL_PLAYER=location.href.match(/player=1/i)||window.IS_EXTERNAL_PLAYER||e.IsShouSou,e.WebRoot="","m.s.sohu.com"===location.host&&(e.WebRoot="http://m.tv.sohu.com"),e.BlankFn=function(){},e.H5Channeled=e.IsWeixinBrowser?"1200230001":"1211010100",e.IsHistorySupport="pushState"in history,e.ADPingbackCount=0,e.IsClient=/SohuVideoMobile/i.test(e.UA)||f("clientType")&&f("clientVer")?!0:!1,e.IsSohuVideoClient=e.IsClient,e.H5Src=f("src")||f("SRC")||"";var k=function(){/t\.m\.tv\.sohu\.com/.test(window.location.host)&&(e.VSTAR_API_URL=e.VSTAR_PXY_URL=e.VSTAR_PXY_TEST_URL,e.VSTAR_MAIN_PATH="")};k(),c.exports=e,window.svp.VARS=e}),svp.define("trace.click",function(a,b,c){var d=svp.$,e=a("base.vars"),f=a("base.util"),g=a("base.url"),h=(a("base.codec"),a("base.cookie"),a("trace")),i={pingback:function(a,b,c){b=b||a&&a.attr("position")||"";var i=window.VideoData||window.videoData||{},j={},k=h.getChanneled(),l=h.getVideoData("vid")||"",m=i.plid||i.aid||i.sid||"",n=location.href||"http://m.tv.sohu.com/";c=c||a&&a.attr("details")||{};var o=g.getParam("columnid");null!==o&&""!==o&&(c.columnId=o),c.ext1="foxplayer_"+window.location.host;try{e.IsWeixinBrowser&&"121111"!==k.substr(0,6)&&(k="1211110001"),j={t:+new Date,uid:h.getUid(),position:b,op:"click",details:JSON.stringify(c),nid:h.getVideoData("nid")||"",url:encodeURIComponent(n),refer:encodeURIComponent(document.referrer||"http://m.tv.sohu.com/"),screen:h.getScreenSize(),os:h.getOS(),platform:h.getPlatform(),passport:h.getPassport(),vid:l||"",pid:m||"",channeled:k,MTV_SRC:encodeURIComponent(h.getChannelSrc())}}catch(p){console.log("trace click exception ",p)}f.pingback("http://z.m.tv.sohu.com/h5_cc.gif?"+d.param(j))}};window.ClickTrace=i,c.exports=i}),svp.define("trace",function(a,b,c){var d=(svp.$,a("base.vars")),e=a("base.util"),f=a("base.url"),g=a("base.cookie"),h=a("base.passport"),i=d.ScreenSize,j=window.navigator.userAgent,k=h.getPassport(),l=function(){if(d.IsIOS)return"ios";if(d.IsAndroid)return"android";var a="Win32"==navigator.platform||"Win64"==navigator.platform||"Windows"==navigator.platform,b="Mac68K"==navigator.platform||"MacPC"==navigator.platform||"Macintosh"==navigator.platform||"MacIntel"==navigator.platform;if(b)return"Mac";var c="X11"==navigator.platform&&!a&&!b;if(c)return"Unix";var e=String(navigator.platform).indexOf("Linux")>-1;if(e)return"Linux";if(a){var f=j.indexOf("Windows NT 5.0")>-1||j.indexOf("Windows 2000")>-1;if(f)return"Win2000";var g=j.indexOf("Windows NT 5.1")>-1||j.indexOf("Windows XP")>-1;if(g)return"WinXP";var h=j.indexOf("Windows NT 5.2")>-1||j.indexOf("Windows 2003")>-1;if(h)return"Win2003";var i=j.indexOf("Windows NT 6.0")>-1||j.indexOf("Windows Vista")>-1;if(i)return"WinVista";var k=j.indexOf("Windows NT 6.1")>-1||j.indexOf("Windows 7")>-1;if(k)return"Win7";var l=j.indexOf("Windows NT 6.2")>-1||j.indexOf("Windows 8")>-1;if(l)return"Win8"}return d.IsWindows?"windows":"other"},m=function(){if(d.IsIOS)return d.IsIPad?"ipad":"iphone";if(d.IsAndroid)return d.IsAndroidPad?"androidpad":"android";if(d.IsWindowsPhone)return"windowsphone";if(d.IsWindows){var a="Win32"==navigator.platform||"Windows"==navigator.platform,b=j.indexOf("WOW64")>-1||j.indexOf("Win64")>-1;return a&&b?"Win64":"Win32"}return navigator.platform},n={getUid:function(){return g.get("SUV")||""},getClientUid:function(){return n.getQueryString("uid")||""},getScreenSize:function(){return i},getPassport:function(){return k},getOS:function(){return l()},getPlatform:function(){return m()},getVideoData:function(a){var b=window.VideoData||window.videoData||{};return b[a]||""},getQueryString:function(a){var b=new RegExp("(^|&?)"+a+"=([^&]*)(&|$)","i"),c=window.location.search.substr(1).match(b);return null!==c?unescape(c[2]):""},getChannelSrc:function(){var a=n.getQueryString("src")||n.getQueryString("SRC")||g.get("MTV_SRC")||"0";a=a.replace("|","").replace("%7C","");var b=/(\d+).(\d+).(\d+).(\d+)/i.test(window.document.domain);return"0"==a&&d.IsWeixinBrowser&&(a="11040001"),"0"!=a||!b&&""!==window.document.domain||(a="11050001"),a},getChanneled:function(){var a=window.VideoData||window.videoData||{},b=window.pageData||{},c=n.getQueryString("src")||n.getQueryString("SRC")||"";c=c.replace("|","").replace("%7C","");var e="1212120001";c&&(e="1212130001");var h=g.get("_channeled")||e,i=location.href||"http://m.tv.sohu.com/";try{h=i.indexOf("hots")>-1||"undefined"!=typeof videoDataFirst&&videoDataFirst?a.channeled||n.getQueryString("channeled")||b.channeled||h:n.getQueryString("channeled")||a.channeled||b.channeled||h,d.IsWeixinBrowser&&"121111"!==h.substr(0,6)&&(h="1211110001"),"sogou"==f.getQueryString("from")&&(h="1200150001")}catch(j){console.log(j)}return h},getConnectionType:function(){return e.getConnectionType()||""}};console.log(n),window.Trace=n,c.exports=n}),svp.define("trace.pv",function(a,b,c){var d=svp.$,e=a("base.vars"),f=a("base.util"),g=a("base.url"),h=a("trace"),i=(a("base.cookie"),a("base.codec"),a("base.passport"),{sendFlag:!1,pv:function(a,b){if(!this.sendFlag){this.sendFlag=!0;var c={};a=a||{};var i=window.VideoData||window.videoData||{},j=h.getChanneled();a&&"undefined"!=typeof a.channeled&&(j=a.channeled);var k=(i.vid||"",location.href||"http://m.tv.sohu.com/"),l=i.plid||i.aid||i.sid||"";b="undefined"==typeof b?{}:b;var m=g.getParam("columnid");null!==m&&""!==m&&(b.columnId=m),b.ext1="foxplayer_"+window.location.host;try{c={url:encodeURIComponent(k),refer:encodeURIComponent(document.referrer||"http://m.tv.sohu.com/"),uid:h.getUid(),webtype:h.getConnectionType(),screen:h.getScreenSize(),catecode:h.getVideoData("cateCode")||h.getVideoData("cate_code")||"",pid:l,vid:h.getVideoData("vid")||"",os:h.getOS(),platform:h.getPlatform(),passport:h.getPassport(),t:+new Date,channeled:j,MTV_SRC:encodeURIComponent(h.getChannelSrc())},c.details=JSON.stringify(b)}catch(n){console.log("trace pv exception ",n)}e.ENABLE_DEBUG&&console.log("trace pv ",c),f.pingback("http://z.m.tv.sohu.com/pv.gif?"+d.param(c))}}});i.iwt=function(){f.loadScript("http://tv.sohu.com/upload/Trace/iwt-min.js",function(){console.log("iwt-min pv http://tv.sohu.com/upload/Trace/iwt-min.js")})},i.comscore=function(){var a=("https:"==document.location.protocol?"https://sb":"http://b")+".scorecardresearch.com/beacon.js";f.loadScript(a,function(){console.log("comscore pv scorecardresearch.com/beacon.js"),"undefined"!=typeof window.COMSCORE&&window.COMSCORE.beacon({c1:"2",c2:"7395122",c3:"",c4:"",c5:"",c6:"",c15:""})})},i.wrating=function(){"m.s.sohu.com"===location.host?f.loadScript("http://js.sohu.com/wrating20120726.js",function(){var a;try{a=window._getAcc()}catch(b){}a&&f.loadScript("http://sohu.wrating.com/a1.js",function(){window.vjAcc=a,window.wrUrl="http://sohu.wrating.com/";try{if(!0===window.vjValidateTrack()){var b=window.wrUrl+"a.gif"+window.vjGetTrackImgUrl();d(document.body).append('<div style="display:none"><img src="'+b+'" id="wrTagImage" /></div>'),window.vjSurveyCheck()}}catch(c){}})}):f.loadScript("http://tv.sohu.com/upload/Trace/wrating.js",function(){console.log("wrating pv http://tv.sohu.com/upload/Trace/wrating.js")})},i.init=function(a){var b=a||{isAutoTrace:!0},c=e.IsAutoTrace||b.isAutoTrace||!0,d=g.getParam("columnid");null!==d&&""!==d&&(b.columnId=d),window._iwt_UA="UA-sohu-123456",e.IS_EXTERNAL_PLAYER||(c&&i.pv(b),/SohuVideoMobile/.test(e.UA)||(i.iwt(),i.comscore(),i.wrating()))},d(document).ready(function(){i.init()}),window.TracePV=i,c.exports=i}),svp.define("trace.rate",function(a){var b=svp.$,c=a("base.cookie"),d=a("base.util"),e=a("base.vars"),f=a("base.url"),g={mode:"man",apiURL:"",hotURL:"",disURLQueue:[],videoTsCount:0,urlTimeoutTimers:{},urlTimeoutURLs:{},id:0,videoData:window.VideoData||window.videoData||{},init:function(){"undefined"!=typeof player&&player.videoData&&(this.videoData=player.videoData),null!==f.getQueryString("r")&&this.videoData&&(b(".main_container").prepend('<div class="rate_test"><span class="button">速度测试</span><span class="tip">UID: '+(c.get("SUV")||"-")+"</span><div></div></div>"),b(".rate_test .button").on("click",function(){var a=b(this),c="disabled";a.hasClass(c)||(a.addClass(c),g.startTest("man"))}))},startTest:function(a){g.mode=a,b(".rate_test div").html(""),this.videoData=window.VideoData?window.VideoData:player&&player.videoData?player.videoData:{},window.callback_test=function(){},g.addTitle("OpenAPI"),g.apiURL="http://api.tv.sohu.com/video/playinfo/"+this.videoData.vid+".json?api_key="+e.API_KEY+"&plat=6&sver=2.8&partner=999&c=1&sid=0&&callback=callback_test",g.addURLItem(g.apiURL);var c,d,f=g.id++,h=new Date,i=0;try{var j=this.videoData.urls.m3u8;c=j.hig||j.nor||j.sup||[]}catch(k){c=[]}for(var l=c.length;l>i;i++)if(c[i]){d=c[i];break}d&&(g.hotURL=d,g.addTitle("Hot VRS"),b(".rate_test div").append(g.getItemHTML(f,d)),d.match(/\.m3u8/i)&&(d=d.replace(/http:\/\/[^\/]+/i,"/hot_vrs")),b.ajax({url:d,type:"get",dataType:"text",success:function(a){if(a){var c,d,e=a.match(/(http:\/\/[^\s]+)/gi)||[],i=0,j=e.length;if(g.videoTsCount=j,j>0){for(g.URLLoaded(f,h,g.hotURL),g.addTitle("m3u8 ("+j+")","rate_test_video"),i=0,j=e.length;j>i;i++)d="m3u8callback_"+i,c=e[i].replace(/http:\/\/[^\/]+/i,"http://data.vod.itc.cn")+"&prot=2&callback="+d+"&id="+g.id++,window[d]=function(a){var b=a.url,c=this.url,d=(c.match(/&id=([0-9]+)/i)||[])[1];if(b){var e=new Date,f=g.addURLItem(b,d,g.requestNextDisURL);g.urlTimeoutTimers[b]=setTimeout(function(){g.URLLoaded(f,e,b,d,null,!0),g.requestNextDisURL()},3e4)}}.bind({url:c}),g.disURLQueue.push(c);g.addURLItem(g.disURLQueue.shift())}else{var k=b(".rate_test .item_"+f).addClass("error");b("time",k).html("!")}}}}))},requestNextDisURL:function(){var a=g.disURLQueue.shift(),c="#rate_test_video",d=b(".rate_test .item .loaded").length;a&&g.addURLItem(a,null,null,c),b(c).html("m3u8 ("+d+"/"+g.videoTsCount+")"),d==g.videoTsCount&&b(".rate_test .button").removeClass("disabled")},addURLItem:function(a,c,e,f){var h=(a.match(/&id=([0-9]+)/i)||[])[1];return h||(h=g.id++),c?b(".rate_test .item_"+c).append(g.getItemHTML(h,a,c)):f?b(f).after(g.getItemHTML(h,a)):b(".rate_test div").append(g.getItemHTML(h,a)),d.loadScript(a,g.URLLoaded,[h,new Date,a,c,e]),h},getItemHTML:function(a,b){return'<p class="item item_'+a+'"><time>...</time><span>'+b+"</span></p>"},URLLoaded:function(a,e,f,h,i,j){var k=g.urlTimeoutTimers[f];if(k&&(clearTimeout(k),delete g.urlTimeoutTimers[f]),!(f in g.urlTimeoutURLs)){j&&(g.urlTimeoutURLs[f]=1);var l=b(".rate_test .item_"+a).addClass(j?"error":"loaded"),m="",n="",o="",p=((new Date-e)/1e3).toFixed(2);
b("time",l).eq(0).html(j?"!":p+" s"),h&&(m=b(".rate_test .item_"+h+" span").html().replace(/&amp;/g,"&")),(n=f.match(/cip=([0-9\.]+)/i))&&(n=n[1],o=f.match(/http:\/\/([^\/]+)/i)[1]);var f=["http://sptjs1.hd.sohu.com.cn/h5/tttst.html","?mode=",g.mode,"&uid=",c.get("SUV")||"","&api=",encodeURIComponent(g.apiURL),"&hotvrs=",encodeURIComponent(g.hotURL),"&disp=",encodeURIComponent(m),"&url=",encodeURIComponent(f),"&clientip=",n,"&cdnip=",o,"&speed=",p,j?"&timeout":""].join("");d.pingback(f),i&&i()}},addTitle:function(a,c){b(".rate_test div").append('<p class="title" id="'+c+'">'+a+"</p>")}};b(function(){g.init()})}),svp.define("trace.refer",function(a,b,c){"use strict";var d=svp.$,e=a("base.vars"),f=a("base.url"),g=a("base.util"),h=a("base.cookie"),i={initFlag:!1};i.SrcSettings={1104:/^wx\.m\.tv\.sohu\.com$/i,1106:/^tv\.sohu\.com$|^pad\.tv\.sohu\.com$/i,1107:/^my\.tv\.sohu\.com$/i,1108:/^sports\.sohu\.com$/i,1105:/^(m|wap|s|3g)\.(tv|s)\.sohu\.com$|^(t|t1|t2)\.m\.tv\.sohu\.com$|^sohutv\.hao3608\.com$/i,1109:/^(news|auto|media|www|yule|mil)\.sohu\.com$/i,1001:/^m\.sohu\.com$|^(3g|zhibo|wap)\.sohu\.com$|^(.*)m\.sohu\.com$|^m\.club\.sohu\.com$|^api\.k\.sohu\.com$/i,1110:/^(.*)\.baidu\.com$|^(.*)baidu\.mobi$|^webapp\.cbs\.baidu\.com$/i,1112:/^(.*)hao123\.com$/i,1113:/^v\.m\.liebao\.cn$|^v\.duba\.com$/i,1114:/^(.*)2345\.com$/i,1115:/^v\.sogou\.com$|^m\.kan\.sogou\.com$|^tv\.sogou\.com$/i,1068:/^sogou\.com$|^(.*)\.sogou\.com$/i,1116:/^(.*)sm\.cn$|^(.*)uodoo\.com$/i,1006:/^tv\.uc\.cn$/i,1007:/^hao\.uc\.cn$/i,1117:/^(news|inews)\.uc\.cn$/i,1033:/^m\.video\.so\.com$/i,1075:/^(.*)(so|haosou)\.com$/i,1118:/^(.*)weibo\.com$|^(.*)weibo\.cn$/i,1119:/^(.*)qzone\.qq\.com$/i,1120:/^(.*)10086\.cn$/i,1123:/^(.*)(google|g).(.*)$/i,1121:/^(.*)wapreach\.com$|^(.*)\.app111\.com$|^(.*)homeinns\.cc$|^(hao|hao123|m)\.xiaomi\.com$/i,1122:/^video\.wapreach\.com$|^video\.browser\.miui\.com$|^v\.html5\.qq\.com$|^kanpian\.easou\.com$|^video\.nearme\.com\.cn$/i,1124:/^(.*)soso\.com$|^(.*)easou\.com$|^(.*)bing\.com$/i},i.getUrlHost=function(a){var b=a||"",c=/.*:\/\/([^\/]*).*/i,d=b.match(c),e="";return d&&(e=d[1]),e},i.getReferHost=function(a){var b=a||document.referrer,c=/.*:\/\/([^\/]*).*/i,d=b.match(c),e="";d&&(e=d[1]);var f=/(\d+).(\d+).(\d+).(\d+)/i.test(e);return(f||!e)&&(e=""),e},i.getRefer=function(){var a=document.referrer;return"undefined"==typeof a&&(a=""),a},i.matchRefer=function(a,b){var c="";try{a=a.replace(/^http:\/\//,"");var d=b;"undefined"==typeof d&&(d=i.SrcSettings);for(var e in d){var f=d[e];if(f&&a&&f.test(a)){c=e,console.log("matchRefer "+a+" , "+e+" "+f);break}}}catch(g){console.log(g)}return c},i.setSrcChanneled=function(){var a={MTV_SRC:"",channeled:""},b=e.h5Src,c=f.getQueryString("src")||f.getQueryString("SRC")||"";b=c,b&&h.set("MTV_SRC",b,86400,".sohu.com");var d=f.getQueryString("channeled")||"",j=i.getRefer()||"",k=i.getReferHost(j)||i.getUrlHost(window.location.href)||"";console.log("get referhost "+k+"   "+d),d=d?d||"1212120001":c?"1212130001":k.indexOf("m.sohu.com")>-1?"1200110001":"1212120001",b?c=b:(k&&(c=i.matchRefer(k,i.SrcSettings),c.length<8&&c>=4&&(c=c=c.substring(0,4)+"0001")),c||(c="11050001")),/^wx\.m\.tv\.sohu\.com$/i.test(document.domain)&&e.IsWeixinBrowser&&(c="11040001",d="1211110001",a.MTV_SRC=c,a.channeled=d,h.set("MTV_SRC",c,86400,".sohu.com"),h.set("_channeled",d,86400,".sohu.com"),console.log("is weixin "+c+"   "+d));var l=h.get("MTV_SRC")||"";return!l&&c&&(a.MTV_SRC=c,h.set("MTV_SRC",c,86400,".sohu.com")),d&&(a.channeled=d,h.set("_channeled",d,86400,".sohu.com")),b=h.get("MTV_SRC")||c,a.MTV_SRC=b,console.log("traceRefer.js MTV_SRC:"+b+",_channeled:"+d),h.get("MUID")||h.set("MUID",g.createUUID(),86400),a},i.init=function(){if(!this.initFlag){this.initFlag=!0;var a={};try{a=i.setSrcChanneled()}catch(b){console.log(b)}console.log("traceRefer matchRefer "+JSON.stringify(a))}},d(function(){i.init()}),window.traceRefer=i,c.exports=i}),svp.define("trace.sugar",function(a,b,c){var d=svp.$,e=a("base.vars"),f=a("base.util"),g=(a("base.url"),a("trace")),h=(a("base.cookie"),a("base.passport"),{pv:function(a){var b={};a=a||{};var c=window.VideoData||window.videoData||{},h=g.getChanneled();a&&"undefined"!=typeof a.channeled&&(h=a.channeled);var i=(c.vid||"",location.href||"http://m.tv.sohu.com/"),j=c.plid||c.aid||c.sid||"";try{b={url:encodeURIComponent(i),refer:encodeURIComponent(document.referrer||"http://m.tv.sohu.com/"),uid:g.getUid(),webtype:g.getConnectionType(),screen:g.getScreenSize(),catecode:g.getVideoData("cateCode")||g.getVideoData("cate_code")||"",pid:j,vid:g.getVideoData("vid")||"",os:g.getOS(),platform:g.getPlatform(),passport:g.getPassport(),t:+new Date,channeled:h,MTV_SRC:encodeURIComponent(g.getChannelSrc())}}catch(k){console.log("trace sugar pv exception ",k)}e.ENABLE_DEBUG&&console.log("trace sugar pv ",b),f.pingback("http://z2.m.tv.sohu.com/pv.gif?"+d.param(b))}});c.exports=h}),svp.define("trace.video",function(a,b,c){var d=svp.$,e=a("base.vars"),f=a("base.cookie"),g=a("base.util"),h=a("trace"),i=a("base.url"),j=a("trace.rate"),k=a("base.codec"),l={t:+new Date,playId:+new Date,inited:!1,init:function(){var a=44,b=window.VideoData||window.videoData||{},c="";e.IsIPad?(a=4,c="1h5"):e.IsIphone?(a=41,c="3h5"):e.IsAndroid?(a=42,c="6h5"):e.IsWindowsPhone?(a=43,c="11h5"):e.IsIEMobile&&(a=43),l.qcPlat=c,l.platType=a,l.qfDomain=(Math.random()>.5?"qf1":"qf2")+".hd.sohu.com.cn",l.qcURL=null!==i.getQueryString("r")&&b?"http://sptjs1.hd.sohu.com.cn/h5/tttst.html":"http://qc.hd.sohu.com.cn/caton/video/",l.inited=!0},qcPingback:function(a){if(!1===l.inited&&l.init(),"1h5"!=l.qcPlat){var b="",c="",d=window.VideoData||window.videoData||{},i=d.video_src||"",j=d.plid||d.aid||d.sid||"";e.IsIOS?b=1:e.IsAndroid?b=2:e.IsWindowsPhone&&(b=3),e.IsIPad?c="ipad":e.IsIpod?c="ipod":e.IsIPhone?c="iphone":e.IsWindowsPhone&&(c="windowsphone");var k="";i.match(/\.m3u8/i)?k="m3u8":i.match(/\.mp4/i)&&(k="mp4");var m=["&uid=",f.get("SUV")||"","&poid=","&plat=",l.qcPlat,"&sver=","&os=",b,"&sysver=",g.getOSVersion(),"&net=",h.getConnectionType(),"&playmode=","&vid=",d.vid||"","&sid=",j,"&vtype=",k,"&pn=",c,"&duFile=",encodeURIComponent(i),"&version=",d.videoVersion||0,"&isp2p=0","&ltype=0","&site=",d.site||"1","&time=",+new Date];a+=m.join(""),g.pingback(l.qcURL+"?"+a)}},parseChanneledJson:function(){var a={},b=window.VideoData||window.videoData||{},c=h.getChanneled(),d=(b.vid||"",location.href||"http://m.tv.sohu.com/");return a.channeled=c||"1212120001",a.href=d,a.clientUid=h.getClientUid(),a},qfPingback:function(a){!1===l.inited&&l.init();var b=window.VideoData||window.videoData||{};a+=["&seekto=0","&pt=",l.platType,"&sid=",f.get("SUV")||"","&vid=",b.vid||"","&nid=",b.nid||"","&ref=",encodeURIComponent(location.href),"&dom=","&t=",l.t++].join(""),g.pingback("http://"+l.qfDomain+"/dov.do?method=stat"+a)},DMPingbackNew:function(a,b,c){var j=window.VideoData||window.videoData||{},m=l.parseChanneledJson(),n=m.channeled,o=m.href||location.href,p=j.plid||j.aid||j.sid||"";a=d.extend({url:o,refer:document.referrer||"http://m.tv.sohu.com/",uid:h.getUid(),webtype:h.getConnectionType(),screen:h.getScreenSize(),catecode:h.getVideoData("cateCode"),pid:p,vid:h.getVideoData("vid"),cateid:h.getVideoData("cid"),ltype:h.getVideoData("ltype"),company:h.getVideoData("company"),version:"0",type:"9001"==h.getVideoData("cid")?"my":"vrs",td:h.getVideoData("totalDuration")||h.getVideoData("total_duration")||0,apikey:e.API_KEY,t:+new Date,os:h.getOS(),platform:h.getPlatform(),passport:h.getPassport(),channeled:n,site:j.site||"1",playid:l.playId,nid:j.nid||"",MTV_SRC:encodeURIComponent(h.getChannelSrc()),muid:f.get("MUID")},a),a.mcode=j.mCode||k.md5(f.get("MUID")+a.vid+"sohu_tv_html5"),c="undefined"==typeof c?{}:c;var q=i.getParam("columnid");null!==q&&""!==q&&(c.columnId=q),c.ext1="foxplayer_"+window.location.host,null!==c&&(a.details=JSON.stringify(c)),g.pingback((b||"http://z.m.tv.sohu.com/vv.gif")+"?"+d.param(a)),window.flashStatistId&&(a.channeled=window.flashStatistId,g.pingback((b||"http://z.m.tv.sohu.com/vv.gif")+"?"+d.param(a)))},vv:function(){var a=window.VideoData||window.videoData||{},b=10;b="undefined"!=typeof a&&"undefined"!=typeof a.duration?a.duration:10,l.qfPingback("&error=0&code=2&allno=0&vvmark=1&totTime="+b),e.IS_EXTERNAL_PLAYER||g.pingback("http://b.scorecardresearch.com/b?c1=1&c2=7395122&c3=&c4=&c5=&c6=&c11="+(f.get("SUV")||"")),l.DMPingbackNew({site:a.site||"1",msg:"playCount",time:"0"}),l.playId=+new Date,l.qcPingback("code=10&duation=0")},realVV:function(a){{var b=a?(+new Date-a)/1e3:0;window.VideoData||window.videoData||{}}l.DMPingbackNew({msg:"videoStart",time:(+new Date-l.playId)/1e3}),l.qcPingback("code=5&duation="+b)},start:function(){var a=window.VideoData||window.videoData||{};ClickTrace.pingback(null,"video_play_start",JSON.stringify({vid:a.vid})),l.qcPingback("code=15")},heart:function(a){l.DMPingbackNew({tc:a},"http://z.m.tv.sohu.com/playtime.gif")},ended:function(a,b){l.DMPingbackNew({msg:"videoEnds",time:a}),l.qcPingback("code=7&duration="+a+"&ct="+b)},abort:function(){l.qfPingback("&code=8&error=800&allno=1&drag=-1")},error:function(a){l.qfPingback("&error=500&code=2&allno=1&vvmark=0"),l.qcPingback("code=8&duation="+(+new Date-a)/1e3+"&error="+(window.VideoData.video_src?"1000":"401"))},buffer:function(a,b){var c=(+new Date-b)/1e3;(1==a||4==a)&&l.qfPingback("&code=5&bufno=1&allbufno="+a),l.qcPingback("code="+(1==a?6:4)+"&ct="+a+"&duation="+c),null!==i.getQueryString("r")&&1==a&&"undefined"!=typeof j&&j.startTest("auto")},autoPlay:function(){l.qcPingback("code=30")},userClickPlay:function(){l.qcPingback("code=31")}};c.exports=l}),svp.albumInfo=svp.albumInfo||{},svp.define("data.album",function(a,b,c){"use strict";var d=svp.$,e=a("data.apiAjaxLoader"),f=a("base.util"),g={loadVideos:function(a,b){var c={},g=a.aid||a.plid;(0===g||""===g)&&(g=0),a.aid=a.plid=g,a.vid=0===a.vid||""===a.vid?"":a.vid,a.site=a.site||1,a.page_size=a.page_size||a.pageSize||20,a.with_trailer=a.with_trailer||0,a.with_fee_video=a.with_fee_video||1;var h={};h.api_key=a.api_key,h.plat=a.plat,h.sver=a.sver,h.partner=a.partner;var i="http://api.tv.sohu.com/v4/album/videos/"+a.plid+".json?page_size="+a.page_size+"&with_trailer="+a.with_trailer+"&with_fee_video="+a.with_fee_video;if(a.vid&&0!=a.vid&&""!==a.vid?i+="&vid="+a.vid+"&site="+(a.site||1):(a.page=a.page||1,i+="&page="+a.page),a.cid&&0!=a.cid&&""!==a.cid&&[76,7,13,24].indexOf(parseInt(a.cid,10))>-1&&(i+="&order=1"),b&&d.isFunction(b)){var j=f.getFnName(b);i+="&callback=?&_cb="+j}e.loader({url:i,data:h,dataType:"jsonp"}).done(function(a){return c=a&&a.data?a:{},b&&d.isFunction(b)?void b(c):c})},loadInfo:function(a,b){var c={},g={};c.aid=a.aid||a.plid||0,c.api_key=a.api_key,c.plat=a.plat,c.sver=a.sver,c.partner=a.partner;var h="http://api.tv.sohu.com/v4/album/info/"+c.aid+".json?_from=h5";if(b&&d.isFunction(b)){var i=f.getFnName(b);h+="&callback=?&_cb="+i}e.loader({url:h,data:c,dataType:"jsonp"}).done(function(a){return g=a&&a.data?a:{},svp.albumInfo=g,b&&d.isFunction(b)?void b(g):g})},loadSeriesByProgramId:function(a,b){var c={},g={};c.aid=a.aid||a.plid||0,c.program_id=a.program_id||0,c.api_key=a.api_key,c.plat=a.plat,c.sver=a.sver,c.partner=a.partner;var h="http://api.tv.sohu.com/v4/program/"+c.program_id+".json?_from=h5";if(b&&d.isFunction(b)){var i=f.getFnName(b);h+="&callback=?&_cb="+i}e.loader({url:h,data:c,dataType:"jsonp"}).done(function(a){return g=a&&a.data?a:{},b&&d.isFunction(b)?void b(g):g})},loadSeriesDataByPlid:function(a,b){var c={},d=this;c.aid=a.aid||a.plid||0,c.program_id=a.program_id||0,c.api_key=a.api_key,c.plat=a.plat,c.sver=a.sver,c.partner=a.partner,c.page_size=50,c.page=1,d.loadInfo(c,function(a){c.page_size=a&&a.data&&a.data.latest_video_count?a.data.latest_video_count:50,d.loadVideos(c,b)})}};c.exports=g}),svp.define("data.apiAjaxLoader",function(a,b,c){"use strict";var d=svp.$,e=a("data.apiCommon"),f=[].slice,g="pending",h="resolved",i="rejected",j=function(a,b){return null!==a?a.hasOwnProperty(b):void 0},k=function(a){return a instanceof Array},l=function(a){return j(a,"length")&&j(a,"callee")},m=function(a){return l(a)?m(Array.prototype.slice.call(a)):k(a)?a.reduce(function(a,b){return k(b)?a.concat(m(b)):(a.push(b),a)},[]):[a]},n=function(a,b){return 0>=a?b():function(){return--a<1?b.apply(this,arguments):void 0}},o=function(a,b){return function(){var c;return c=[a].concat(Array.prototype.slice.call(arguments,0)),b.apply(this,c)}},p=function(a,b,c){var d,e,f,g,h;for(g=m(a),h=[],e=0,f=g.length;f>e;e++)d=g[e],h.push(d.call.apply(d,[c].concat(Array.prototype.slice.call(b))));return h},q=function(){var a,b,c,d,e,j;return j=g,d=[],e=[],a=[],c={},this.promise=function(b){b=b||{},b.state=function(){return j};var f=function(a,d){return function(){return j===g&&d.push.apply(d,m(arguments)),a()&&p(arguments,c),b}};b.done=f(function(){return j===h},d),b.fail=f(function(){return j===i},e),b.always=f(function(){return j!==g},a);var k=function(a,c){var d=new q,e=function(a,b,c){return a(c?function(){return b(c.apply(null,m(arguments)))}:function(){return b.apply(null,m(arguments))})};return e(b.done,d.resolve,a),e(b.fail,d.reject,c),d};return b.pipe=k,b.then=k,b},this.promise(this),b=function(b,d,e){return function(){return j===g&&(j=b,c=arguments,p([d,a],c,e)),this}},this.resolve=b(h,d),this.reject=b(i,e),this.resolveWith=function(){var a=arguments[0],c=2<=arguments.length?f.call(arguments,1):[];return b(h,d,a).apply(null,c)},this.rejectWith=function(){var a=arguments[0],c=2<=arguments.length?f.call(arguments,1):[];return b(i,e,a).apply(null,c)},this},r=function(){var a,b,c,d,e,f,g,h;for(d=new q,b=m(arguments),c=n(b.length,d.resolve),e=0,g=b.length;g>e;e++)a=b[e],a.done(c);for(f=0,h=b.length;h>f;f++)a=b[f],a.fail(function(){return d.reject()});return d.promise()},s=function(a){return a.Deferred=function(){return new q},a.ajax=o(a.ajax,function(a,b){var c,d;return null===b&&(b={}),d=new q,c=function(a,b){return o(a,function(){var a=arguments[0],c=2<=arguments.length?f.call(arguments,1):[];return a&&a.apply(null,c),b.apply(null,c)})},b.success=c(b.success,d.resolve),b.error=c(b.error,d.reject),a(b),d.promise()}),a.ajaxTolerate=o(a.ajax,function(a,b){var c=0,d=!1;null===b&&(b={});var e=new q,g=function(e,g,h){return o(e,function(){if(!d){var e=arguments[0],i=2<=arguments.length?f.call(arguments,1):[];return h?1>c?(c++,a(b),null):2===c?(c++,d=!0,e&&e.apply(null,i),g.apply(null,i)):(c++,null):(d=!0,e&&e.apply(null,i),g.apply(null,i))}})};return b.success=g(b.success,e.resolve),b.error=g(b.error,e.reject,!0),a(b),setTimeout(function(){d||a(b)},1e3),e.promise()}),a.when=r};s(d);var t={loader:function(a){var b=a.data||{};return d.each(e.API_PARAMS,function(a,c){b[a]||(b[a]=c)}),d.isUndefined(b.cache)&&(b.cache=!0),d.ajaxTolerate(a)},tolerate:d.ajaxTolerate};c.exports=t}),svp.define("data.apiCommon",function(a,b,c){"use strict";var d=a("base.vars"),e={API_KEY:d.API_KEY,API_URL:"/api/",API_PARAMS:{api_key:d.API_KEY,plat:"17",sver:"1.0",partner:"1"}};c.exports=e}),svp.define("data.appDownload",function(a,b,c){"use strict";var d=svp.$,e=a("base.vars"),f=a("base.util"),g=a("base.cookie"),h={channelSrc:"0",updateTime:36e5,maxSaveCounts:10,getLocalData:function(a){var b=g.get("localChannelInfo"),c=[],d=null;if("undefined"!=typeof b&&""!==b&&null!==b&&(c=JSON.parse(b)),"undefined"!=typeof a){for(var e=0,f=c.length;f>e;e++){var h=c[e];if(h.channelSrc===a&&Date.now()<h.time+this.updateTime){d=h;break}}return d}return c},setLocalData:function(a){var b=d.extend({},a);b.time=Date.now();for(var c=this.getLocalData(),e=!1,f=0,h=c.length;h>f;f++){var i=c[f];if(i.channelSrc===b.channelSrc){e=!0,c[f]=b;break}}e||c.unshift(b),c.length>this.maxSaveCounts&&(c.length=this.maxSaveCounts),g.set("localChannelInfo",JSON.stringify(c))},getChannelInfo:function(a,b){var c=this,g=a&&a.channelSrc?a.channelSrc:this.channelSrc;b="function"==typeof b?b:function(){},(g+"").length>4&&(g=g.substr(0,4));var h={appointUrl:f.getSohuDefaultApplink(),startapp:"1",channelSrc:g,cover:1,isClosed:0,timeLimit:0,channelNum:680,cid:"",quality:"nor,hig,sup"};if(null!==this.getLocalData(g)){var i=this.getLocalData(g);d.isUndefined(i.cover)&&(i.cover=1,i.isClosed=0,i.timeLimit=0,i.quality="nor,hig,sup",i.channelNum=680),d.isUndefined(i.cid)&&(i.cid=""),b(i)}else{g=parseInt(g,10),isNaN(g)&&(g="0");var j="http://m.tv.sohu.com/h5/cooperation/"+g+".json?pos=1&platform="+f.getUserPt()+"&callback=?";console.log("获取下载链接ajax:",j);var k=new Date;k.setHours(0),k.setMinutes(0),k.setSeconds(0),d.ajax({data:{t:k.getTime()},url:j,type:"get",dataType:"jsonp",cache:!0,success:function(a){if("undefined"!=typeof a&&a.records&&a.records.length>0){var d=a.records[0];e.IsIpad||e.IsIphone||e.IsWeixinBrowser||(h.appointUrl=d.link),h.startapp="undefined"!=typeof d.startapp?d.startapp+"":"1",h.cover=d.cover,h.isClosed=d.isClosed,h.cid=d.cid||"",h.timeLimit=d.time_limit,h.quality=d.quality,h.channelNum=d.num,h.time=Date.now(),c.setLocalData(h)}b(h)},error:function(){b(h)}})}},getDownloadUrl:function(a,b){if(b="function"==typeof b?b:function(){},a&&a.downUrl)b(a.downUrl);else if(e.IsWeixinBrowser)b(e.WeiXinAppBoxURL);else{var c=a&&a.channelSrc||this.channelSrc,d=this.getLocalData(c);null!==d?b(d.appointUrl):this.getChannelInfo(a,function(a){b(a.appointUrl)})}},gotoDownload:function(a){this.getDownloadUrl(a,function(b){if(""!==b){var c=a&&a.delayTime?a.delayTime:h.openTime;setTimeout(function(){window.location.href=b},c)}})}};c.exports=h}),svp.define("data.copyright",function(a,b,c){var d=svp.$,e=a("base.vars"),f=a("data.apiCommon"),g=a("base.errorTypes"),h=a("base.special"),i={},j="http://api.tv.sohu.com/mobile_user/device/clientconf.json",k=function(a,b){d.ajax({url:j,data:a,dataType:"jsonp",success:b,error:b})};i.isFeeVideo=function(a){var b=!1;if(!("undefined"==typeof a||d.isUndefined(a.dataType)&&d.isUndefined(a.data_type))){var c=a.dataType||a.data_type;c=c.toString(),d(h.FEE_DATA_TYPE_LIST).indexOf(c)>-1&&(b=!0)}return b},i.check=function(a,b){var c={result:!1,code:"200",msg:g.COPYRIGHT[200]};if(b=d.isFunction(b)?b:function(){},d.isUndefined(a))b(c);else if("2"==a.mobileLimit||"1"==a.h5Limit)c.result=!1,c.code="100",c.msg=g.COPYRIGHT[100],b(c);else if(i.isFeeVideo(a))c.result=!1,c.code="102",c.msg=g.COPYRIGHT[102],b(c);else if("2"==a.h5Limit)c.result=!1,c.code="101",c.msg=g.COPYRIGHT[101],b(c);else if("1"==a.ipLimit){var h={};d.extend(h,f.API_PARAMS,{from:"h5",poid:"1",sysver:e.OsVersion||"0"}),k(h,function(a){a.data&&"1"==a.data.iplimit?(c.result=!1,c.code="100",c.msg=g.COPYRIGHT[100]):(c.result=!0,c.code="200",c.msg=g.COPYRIGHT[200]),b(c)})}else b(c)},c.exports=i}),svp.define("data.liveInfo",function(a,b,c){"use strict";var d=svp.$,e=a("base.vars"),f=a("base.errorTypes"),g=a("data.apiAjaxLoader"),h=a("base.cookie"),i=a("base.util"),j=a("base.action"),k={globalCfg:{vid:"",liveId:""},formatLiveInfo:function(a){var b={code:"200",msg:"",data:null};if("undefined"==typeof a||null===a||d.isUndefined(a.data)||d.isUndefined(a.data.tvStation))b.code="407",b.msg=f.REQUEST[b.code];else{var c=a.data.tvStation,e={};e.liveId=c.id||"147",e.liveName=c.name||"",e.liveUrl=c.liveUrl||"http://gslb.tv.sohu.com/live?cid=31&ver=seg&ckey=fME9d6wsjgYrRr&type=hls&prot=1&sig=PUP10dOmmowJw8sLRjPStw..&type=hls",e.liveIcon=c.iconBigPic||"",e.liveEnName=c.enName||"",e.ipLimit=c.ipLimit||"0",b.data=e}return b},loadHLSUrlByLiveId:function(a,b){b="function"==typeof b?b:function(){};var c={},f={};d.extend(d.extend(c,k.globalCfg),a),c.liveId=0===parseInt(c.liveId,10)||""===c.liveId?147:c.liveId,f.api_key=a.api_key,f.plat=a.plat,f.sver=a.sver,f.partner=a.partner,f.appid=a.appid||"tv",f.uid=h.get("SUV")||"",f._c=h.isEnabled?1:0,f.pt=i.getUserPt(),f.qd=d.isUndefined(j.channelNum)||"0"===j.channelNum?"680":j.channelNum,f.src=d.isUndefined(j.channelSrc)||"0"===j.channelSrc?"1105":j.channelSrc,f.SOHUSVP=h.get("SOHUSVP"),f.plat="17";var l=e.SVP_URL+"/svp/live/url/"+c.liveId+".json";g.loader({url:l,data:f,dataType:"jsonp",cache:!0}).done(function(a){b(k.formatLiveInfo(a))}).fail(function(){b(k.formatLiveInfo())})}};c.exports={getData:k.loadHLSUrlByLiveId}}),svp.define("data.mySugar",function(a,b,c){"use strict";var d=svp.$,e=a("base.cookie"),f=a("base.errorTypes"),g="http://m.tv.sohu.com/svp/mysugar",h="http://t.m.tv.sohu.com/svp/mysugar",i={},j=function(a,b){e.del("SOHUSVP");var c="test"===a.appid?h:g;delete a.appid,d.ajax({data:a,url:c,dataType:"jsonp",success:b,error:b})},k=function(a){var b={code:"401",msg:f.SUPPORT[401],sohuSVP:""};return"undefined"!=typeof a&&200===a.status&&(b.code="200",b.msg="",d.isUndefined(a.SOHUSVP)||e.set("SOHUSVP",a.SOHUSVP),b.sohuSVP=e.get("SOHUSVP")),b};i.getData=function(a,b){if(b="function"==typeof b?b:function(){},"undefined"!=typeof a){var c={};c.vid=a.vid||"",c.uid=a.uid||"",c.pt=a.pt||"",c.appid=a.appid||"",j(c,function(a){var c=k(a);b(c)})}else b(k())},c.exports=i}),svp.define("data.recommend",function(a,b,c){var d=a("data.apiAjaxLoader"),e={url:"http://api.tv.sohu.com/v4/search/top.json",page_size:16,page:1,playerRecommendUrl:"http://api.tv.sohu.com/v4/search/recommend.json",playerRecommendPageSize:6,playerRecommendPage:1,getTopData:function(a,b){var c={cid:a.cid||1,o:a.o||10,page_size:a.page_size||e.page_size,page:a.page||e.page};d.loader({url:e.url,data:c,dataType:"jsonp"}).done(function(a){if(a&&200===a.status){var c=a.data;c&&b&&"function"==typeof b&&b(c)}})},getRecommendData:function(a,b){a.vid="source"===a.vid?1:a.vid;var c={vid:a.vid||"",cid:a.cid||1,site:a.site||1,page_size:a.page_size||e.playerRecommendPageSize,page:a.page||e.playerRecommendPage};d.loader({url:e.playerRecommendUrl,data:c,dataType:"jsonp"}).done(function(a){if(a&&200===a.status){var c=a.data;if(c){if(!b||"function"!=typeof b)return c;b(c)}}})},getDataByType:function(a,b,c){"recommend"===a?e.getRecommendData(b,c):e.getTopData(b,c)}};c.exports={getData:e.getDataByType}}),svp.videoData=svp.videoData||{},svp.define("data.videoInfo",function(a,b,c){"use strict";var d=svp.$,e=svp.async,f=a("base.vars"),g=a("base.url"),h=a("base.cookie"),i=a("base.util"),j=a("data.apiAjaxLoader"),k=a("data.apiCommon"),l=a("base.errorTypes"),m=a("base.action"),n={fotmatBasicParams:function(a,b,c,d){return b&&b[d]?b[d]:a[c?c:d]||""},formatPlayUrl:function(a){if("string"==typeof a&&""!==a){var b=a.split(",");return b=b.length>0&&""!==b[0]?b:[]}return""},getParamsOption:function(a,b,c){if(a=a||{},a.vid=a.vid||g.getParam("vid")||"",a.site=a.site||g.getParam("site")||"1",b&&(a[b]=a[b]?a[b]||g.getParam(b):c),g.getParam("aid"))try{a.aid=parseInt(g.getParam("aid"),10)}catch(d){}return a},formatVideoInfo:function(a,b){var c=b.data||{},e=a,f=c,g="";c&&c.aid&&(g=c.aid||"");var h=d.extend(!0,f,e);h.vid=a.vid?a.vid:c.vid||"",h.tvid=a.tvid?a.tvid:c.tv_id||"",h.nid=a.nid?a.nid:c.nid||"",h.sid=a.sid?a.sid:c.aid||g,h.plid=a.plid?a.plid:c.aid||g,h.tvname=c.video_name||this.fotmatBasicParams(a,c,"tvname","tv_name")||"",h.tips=c.tip||this.fotmatBasicParams(a,c,"tips","tip")||"",h.videoCount=a.videoCount?a.videoCount:c.video_count||0,h.videoOrder=a.videoOrder?a.videoOrder:c.video_order||1,h.totalSet=a.totalSet?a.totalSet:c.total_video_count||0,h.cateCode=a.cateCode?a.cateCode:c.cate_code||"",h.setListPageSize=a.setListPageSize?a.setListPageSize:20,h.startTime=a.startTime?a.startTime:c.start_time||0,h.endTime=a.endTime?a.endTime:c.end_time||0,h.totalDuration=a.totalDuration?a.totalDuration:c.total_duration||0,h.downloadSize=a.downloadSize?a.downloadSize:c.file_size_mobile||0,h.playCount=a.playCount?a.playCount:c.play_count||0,h.showDate=a.showDate?a.showDate:c.show_date||"",h.isAds=a.isAds?a.isAds:c.is_ads||0,h.ipLimit=a.ipLimit?a.ipLimit:c.ip_limit||0,h.mobileLimit=a.mobileLimit?a.mobileLimit:c.mobile_limit||0,h.h5Limit=a.h5Limit?a.h5Limit:c.h5_limit||0,h.areaId=a.areaId?a.areaId:c.area_id||6,h.verHighPic=this.fotmatBasicParams(a,c,"verHighPic","ver_high_pic")||c.video_big_pic||c.ver_big_pic||"",h.horHighPic=this.fotmatBasicParams(a,c,"horHighPic","hor_high_pic")||c.video_big_pic||c.hor_big_pic||"",h.dataType=a.dataType?a.dataType:c.data_type||0,h.mCode=b.mCode||"";var i=["ip_limit","mobile_limit","clips_duration_nor","clips_duration_high","clips_bytes_high","clips_bytes_nor","clips_bytes_super","clips_duration_super","url_nor","url_high","url_super","url_nor_mp4","url_high_mp4","url_super_mp4"];return d.each(i,function(a,b){h.hasOwnProperty(b)&&delete h[b]}),h},getVideoUrls:function(a,b){b="function"==typeof b?b:function(){};var c={};c.site=a.site||"",c.cateCode=a.cateCode||a.cate_code||"",c.cateCode=c.cateCode.substr(0,3),c.uid=h.get("SUV")||"",c._c=h.isEnabled?1:0,c.pt=i.getUserPt(),c.qd=d.isUndefined(m.channelNum)||"0"===m.channelNum?"680":m.channelNum,c.src=d.isUndefined(m.channelSrc)||"0"===m.channelSrc?"1105":m.channelSrc,c.SOHUSVP=h.get("SOHUSVP"),c.aid=a.aid||"",c.plat="17",c.appid=a.appid||"tv";var e=a.vid,g={code:"200",msg:"",data:null};if(""===e)return g.code="405",g.msg=l.REQUEST[g.code],void b(g);var k=f.SVP_URL+"svp/play/url/"+e+".json";j.loader({url:k,data:c,dataType:"jsonp",cache:!0}).done(function(a){200!==a.status||d.isUndefined(a.data)?(g.code="405",g.msg=l.REQUEST[g.code],b(g)):(g.data=a.data,b(g))}).fail(function(){g.code="406",g.msg=l.REQUEST[g.code],b(g)})},getVideoInfo:function(a,b){b="function"==typeof b?b:function(){};var c=this,a=c.getParamsOption(a),e={},g=a.vid||"",i=a.site,m={code:"200",msg:"",data:null};if(""===g)return m.code="402",m.msg=l.REQUEST[m.code],void b(m);e.api_key=a.api_key||"",e.plat=a.plat||"",e.sver=a.sver||"",e.partner=a.partner||"",e.site=i,e.muid=h.get("MUID");var n=f.SVP_URL+"svp/video/info/"+g+".json";j.loader({url:n,data:e,dataType:"jsonp",cache:!0}).done(function(e){if(200!==e.status||d.isUndefined(e.data)){var h=1===i||"1"===i?2:1,j=f.SVP_URL+"svp/video/info/"+g+".json";d.ajax({data:d.extend({},k.API_PARAMS,{site:h}),url:j,dataType:"jsonp",success:function(d){d&&d.data&&(a.site=h,m.data=c.formatVideoInfo(a,d),b(m))},error:function(){m.code="404",m.msg=l.REQUEST[m.code],b(m)}})}else m.data=c.formatVideoInfo(a,e),b(m)}).fail(function(){m.code="403",m.msg=l.REQUEST[m.code],b(m)})},loadVideoData:function(a,b){var c=n;e.auto({videoInfo:function(b){c.getVideoInfo(a,function(a){b(null,a)})},videoUrls:["videoInfo",function(a,b){"200"===b.videoInfo.code?c.getVideoUrls(b.videoInfo.data,function(b){a(null,b)}):a(null,b.videoInfo)}]},function(a,c){if(b="function"==typeof b?b:function(){},"200"!==c.videoInfo.code)return void b(c.videoInfo);if("200"!==c.videoUrls.code)return void b(c.videoUrls);var e={code:"200",msg:"",data:d.extend(!0,{},c.videoInfo.data,c.videoUrls.data)};b(e)})}};c.exports={getData:n.loadVideoData}});